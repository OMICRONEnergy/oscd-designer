{"version":3,"file":"oscd-designer.spec.js","sourceRoot":"","sources":["../oscd-designer.spec.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-expressions */\nimport { html } from 'lit';\nimport { fixture, expect } from '@open-wc/testing';\n\nimport type { Button } from '@material/mwc-button';\n\nimport { EditEvent, handleEdit } from '@openscd/open-scd-core';\n\nimport { IconButton } from '@material/mwc-icon-button';\nimport { resetMouse, sendMouse } from '@web/test-runner-commands';\nimport { identity } from '@openscd/oscd-scl';\nimport { ListItem } from '@material/mwc-list/mwc-list-item.js';\nimport Designer from './oscd-designer.js';\nimport { SLDEditor } from './sld-editor.js';\n\nfunction middleOf(element: Element): [number, number] {\n  const { x, y, width, height } = element.getBoundingClientRect();\n\n  return [\n    Math.floor(x + window.pageXOffset + width / 2),\n    Math.floor(y + window.pageYOffset + height / 2),\n  ];\n}\n\ncustomElements.define('oscd-designer', Designer);\n\nexport const emptyDocString = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SCL version=\"2007\" revision=\"B\" xmlns=\"http://www.iec.ch/61850/2003/SCL\">\n</SCL>`;\n\nexport const substationDocString = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SCL version=\"2007\" revision=\"B\" xmlns=\"http://www.iec.ch/61850/2003/SCL\">\n  <Substation name =\"S1\" desc=\"No SLD xmlns attribute here\"></Substation>\n</SCL>`;\n\nexport const voltageLevelDocString = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SCL version=\"2007\" revision=\"B\" xmlns=\"http://www.iec.ch/61850/2003/SCL\">\n  <Substation name=\"S1\" xmlns:esld=\"https://transpower.co.nz/SCL/SSD/SLD/v0\" esld:w=\"50\" esld:h=\"25\">\n    <VoltageLevel name=\"V1\" esld:x=\"1\" esld:y=\"1\" esld:w=\"48\" esld:h=\"23\"/>\n  </Substation>\n</SCL>`;\n\nexport const bayDocString = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SCL version=\"2007\" revision=\"B\" xmlns=\"http://www.iec.ch/61850/2003/SCL\">\n  <Substation xmlns:esld=\"https://transpower.co.nz/SCL/SSD/SLD/v0\" name=\"S1\" esld:w=\"50\" esld:h=\"25\">\n    <VoltageLevel name=\"V1\" esld:x=\"1\" esld:y=\"1\" esld:w=\"13\" esld:h=\"13\">\n      <Bay name=\"B1\" esld:x=\"2\" esld:y=\"2\" esld:w=\"3\" esld:h=\"3\">\n        <ConnectivityNode name=\"L1\" pathName=\"S1/V1/B1/L1\"/>\n      </Bay>\n    </VoltageLevel>\n    <VoltageLevel name=\"V2\" esld:x=\"15\" esld:y=\"1\" esld:w=\"13\" esld:h=\"13\">\n      <Bay name=\"B1\" esld:x=\"20\" esld:y=\"11\" esld:w=\"1\" esld:h=\"1\"/>\n    </VoltageLevel>\n  </Substation>\n</SCL>`;\n\nexport const equipmentDocString = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<SCL version=\"2007\" revision=\"B\" xmlns=\"http://www.iec.ch/61850/2003/SCL\">\n  <Substation xmlns:esld=\"https://transpower.co.nz/SCL/SSD/SLD/v0\" name=\"S1\" esld:w=\"50\" esld:h=\"25\">\n    <VoltageLevel name=\"V1\" esld:x=\"1\" esld:y=\"1\" esld:w=\"13\" esld:h=\"13\">\n      <Bay name=\"B1\" esld:x=\"2\" esld:y=\"2\" esld:w=\"3\" esld:h=\"3\">\n      </Bay>\n    </VoltageLevel>\n    <VoltageLevel name=\"V2\" esld:x=\"15\" esld:y=\"1\" esld:w=\"23\" esld:h=\"23\">\n      <Bay name=\"B1\" esld:x=\"20\" esld:y=\"11\" esld:w=\"6\" esld:h=\"6\">\n        <ConductingEquipment type=\"CBR\" name=\"CBR1\" esld:x=\"26\" esld:y=\"14\"/>\n        <ConductingEquipment type=\"BAT\" name=\"BAT1\" esld:x=\"26\" esld:y=\"14\"/>\n      </Bay>\n    </VoltageLevel>\n  </Substation>\n</SCL>`;\n\ndescribe('Designer', () => {\n  let element: Designer;\n\n  beforeEach(async () => {\n    const doc = new DOMParser().parseFromString(\n      emptyDocString,\n      'application/xml'\n    );\n    element = await fixture(\n      html`<oscd-designer\n        docName=\"testDoc\"\n        .doc=${doc}\n        @oscd-edit=${({ detail }: EditEvent) => {\n          handleEdit(detail);\n          element.editCount += 1;\n        }}\n      ></oscd-designer>`\n    );\n  });\n\n  afterEach(async () => {\n    await resetMouse();\n  });\n\n  it('shows a placeholder message while no document is loaded', async () => {\n    element = await fixture(html`<oscd-designer></oscd-designer>`);\n    expect(element.shadowRoot?.querySelector('p')).to.contain.text('SCL');\n  });\n\n  it('adds the SLD XML namespace to any substations lacking it', async () => {\n    const doc = new DOMParser().parseFromString(\n      substationDocString,\n      'application/xml'\n    );\n    element = await fixture(\n      html`<oscd-designer\n        docName=\"testDoc\"\n        .doc=${doc}\n        @oscd-edit=${({ detail }: EditEvent) => {\n          handleEdit(detail);\n          element.editCount += 1;\n        }}\n      ></oscd-designer>`\n    );\n    expect(doc.querySelector('Substation')).to.have.attribute('xmlns:esld');\n  });\n\n  it('adds a substation on add button click', async () => {\n    expect(element.doc.querySelector('Substation')).to.not.exist;\n    element\n      .shadowRoot!.querySelector<Button>('[label=\"Add Substation\"]')\n      ?.click();\n    expect(element.doc.querySelector('Substation')).to.exist;\n  });\n\n  it('gives new substations unique names', async () => {\n    element\n      .shadowRoot!.querySelector<Button>('[label=\"Add Substation\"]')\n      ?.click();\n    element\n      .shadowRoot!.querySelector<Button>('[label=\"Add Substation\"]')\n      ?.click();\n    const [name1, name2] = Array.from(\n      element.doc.querySelectorAll('Substation')\n    ).map(substation => substation.getAttribute('name'));\n    expect(name1).not.to.equal(name2);\n  });\n\n  it('zooms in on zoom in button click', async () => {\n    const initial = element.gridSize;\n    element.shadowRoot!.querySelector<IconButton>('[icon=\"zoom_in\"]')?.click();\n    expect(element.gridSize).to.be.greaterThan(initial);\n  });\n\n  it('zooms out on zoom out button click', async () => {\n    const initial = element.gridSize;\n    element.shadowRoot!.querySelector<IconButton>('[icon=\"zoom_out\"]')?.click();\n    expect(element.gridSize).to.be.lessThan(initial);\n  });\n\n  it('does not zoom out past a positive minimum value', async () => {\n    for (let i = 0; i < 20; i += 1)\n      element\n        .shadowRoot!.querySelector<IconButton>('[icon=\"zoom_out\"]')\n        ?.click();\n    expect(element.gridSize).to.be.greaterThan(0);\n  });\n\n  describe('given a substation', () => {\n    beforeEach(async () => {\n      element\n        .shadowRoot!.querySelector<Button>('[label=\"Add Substation\"]')\n        ?.click();\n      await element.updateComplete;\n    });\n\n    it('allows resizing substations', async () => {\n      const sldEditor =\n        element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n      sldEditor.shadowRoot\n        ?.querySelector<IconButton>('h2 > mwc-icon-button')\n        ?.click();\n      sldEditor.substationWidthUI.value = '50';\n      sldEditor.substationHeightUI.value = '25';\n      sldEditor.shadowRoot\n        ?.querySelector<Button>('mwc-button[slot=\"primaryAction\"]')\n        ?.click();\n      expect(element).to.have.property('editCount', 0);\n      sldEditor.substationWidthUI.value = '1337';\n      sldEditor.substationHeightUI.value = '42';\n      sldEditor.shadowRoot\n        ?.querySelector<Button>('mwc-button[slot=\"primaryAction\"]')\n        ?.click();\n      expect(sldEditor.substation).to.have.attribute('esld:h', '42');\n      expect(sldEditor.substation).to.have.attribute('esld:w', '1337');\n    });\n\n    it('allows placing a new voltage level', async () => {\n      element\n        .shadowRoot!.querySelector<Button>('[label=\"Add VoltageLevel\"]')\n        ?.click();\n      expect(element)\n        .property('placing')\n        .to.have.property('tagName', 'VoltageLevel');\n      await sendMouse({ type: 'click', position: [200, 200] });\n      expect(element).to.have.property('placing', undefined);\n      expect(element)\n        .property('resizing')\n        .to.have.property('tagName', 'VoltageLevel');\n      await sendMouse({ type: 'click', position: [400, 400] });\n      expect(element).to.have.property('resizing', undefined);\n      expect(element.doc.querySelector('VoltageLevel')).to.exist;\n      expect(element.doc.querySelector('VoltageLevel')).to.have.attribute(\n        'x',\n        '5'\n      );\n      expect(element.doc.querySelector('VoltageLevel')).to.have.attribute(\n        'y',\n        '3'\n      );\n      expect(element.doc.querySelector('VoltageLevel')).to.have.attribute(\n        'w',\n        '7'\n      );\n      expect(element.doc.querySelector('VoltageLevel')).to.have.attribute(\n        'h',\n        '8'\n      );\n    });\n\n    it('gives new voltage levels unique names', async () => {\n      element\n        .shadowRoot!.querySelector<Button>('[label=\"Add VoltageLevel\"]')\n        ?.click();\n      await sendMouse({ type: 'click', position: [200, 200] });\n      await sendMouse({ type: 'click', position: [300, 300] });\n      element\n        .shadowRoot!.querySelector<Button>('[label=\"Add VoltageLevel\"]')\n        ?.click();\n      await sendMouse({ type: 'click', position: [350, 350] });\n      await sendMouse({ type: 'click', position: [450, 450] });\n      const [name1, name2] = Array.from(\n        element.doc.querySelectorAll('VoltageLevel')\n      ).map(substation => substation.getAttribute('name'));\n      expect(name1).not.to.equal(name2);\n      expect(name1).to.exist;\n      expect(name2).to.exist;\n    });\n\n    it('allows the user to abort placing an element', async () => {\n      element\n        .shadowRoot!.querySelector<Button>('[label=\"Add VoltageLevel\"]')\n        ?.click();\n      expect(element)\n        .property('placing')\n        .to.have.property('tagName', 'VoltageLevel');\n      const event = new KeyboardEvent('keydown', { key: 'Escape' });\n      window.dispatchEvent(event);\n      expect(element).to.have.property('placing', undefined);\n    });\n\n    describe('with a voltage level', () => {\n      beforeEach(async () => {\n        const doc = new DOMParser().parseFromString(\n          voltageLevelDocString,\n          'application/xml'\n        );\n        element.doc = doc;\n        await element.updateComplete;\n      });\n\n      it('forbids undersizing the substation', async () => {\n        const sldEditor =\n          element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n        sldEditor.shadowRoot\n          ?.querySelector<IconButton>('h2 > mwc-icon-button')\n          ?.click();\n        sldEditor.substationWidthUI.value = '30';\n        sldEditor.substationHeightUI.value = '20';\n        sldEditor.shadowRoot\n          ?.querySelector<Button>('mwc-button[slot=\"primaryAction\"]')\n          ?.click();\n        expect(sldEditor.substation).to.have.attribute('esld:h', '25');\n        expect(sldEditor.substation).to.have.attribute('esld:w', '50');\n      });\n\n      it('allows resizing voltage levels', async () => {\n        const sldEditor =\n          element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n        const moveHandle =\n          sldEditor.shadowRoot!.querySelectorAll<SVGElement>('a.handle')[1];\n        moveHandle.dispatchEvent(new PointerEvent('click'));\n        expect(element)\n          .property('resizing')\n          .to.exist.and.to.have.property('tagName', 'VoltageLevel');\n        const voltageLevel = element.resizing!;\n        expect(voltageLevel).to.have.attribute('esld:w', '48');\n        expect(voltageLevel).to.have.attribute('esld:h', '23');\n        await sendMouse({ type: 'click', position: [300, 300] });\n        expect(voltageLevel).to.have.attribute('esld:w', '8');\n        expect(voltageLevel).to.have.attribute('esld:h', '7');\n      });\n\n      it('allows moving voltage levels', async () => {\n        const sldEditor =\n          element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n        const moveHandle =\n          sldEditor.shadowRoot!.querySelector<SVGElement>('a.handle')!;\n        moveHandle.dispatchEvent(new PointerEvent('click'));\n        expect(element)\n          .property('placing')\n          .to.exist.and.to.have.property('tagName', 'VoltageLevel');\n        const voltageLevel = element.placing!;\n        expect(voltageLevel).to.have.attribute('esld:x', '1');\n        expect(voltageLevel).to.have.attribute('esld:y', '1');\n        await sendMouse({ type: 'click', position: [100, 150] });\n        expect(voltageLevel).to.have.attribute('esld:x', '2');\n        expect(voltageLevel).to.have.attribute('esld:y', '2');\n      });\n\n      it('forbids moving voltage levels out of bounds', async () => {\n        const sldEditor =\n          element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n        const moveHandle =\n          sldEditor.shadowRoot!.querySelector<SVGElement>('a.handle')!;\n        moveHandle.dispatchEvent(new PointerEvent('click'));\n        expect(element)\n          .property('placing')\n          .to.exist.and.to.have.property('tagName', 'VoltageLevel');\n        const voltageLevel = element.placing!;\n        expect(voltageLevel).to.have.attribute('esld:x', '1');\n        expect(voltageLevel).to.have.attribute('esld:y', '1');\n        await sendMouse({ type: 'click', position: [200, 200] });\n        expect(voltageLevel).to.have.attribute('esld:x', '1');\n        expect(voltageLevel).to.have.attribute('esld:y', '1');\n      });\n\n      it('allows placing a new bay', async () => {\n        element.shadowRoot!.querySelector<Button>('[label=\"Add Bay\"]')?.click();\n        expect(element).property('placing').to.have.property('tagName', 'Bay');\n        const sldEditor =\n          element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n        await sendMouse({ type: 'click', position: [200, 200] });\n        expect(element).to.have.property('placing', undefined);\n        expect(element).property('resizing').to.have.property('tagName', 'Bay');\n        await sendMouse({ type: 'click', position: [400, 400] });\n        expect(sldEditor).to.have.property('resizing', undefined);\n        const bay = element.doc.querySelector('Bay');\n        expect(bay).to.exist;\n        expect(bay).to.have.attribute('x', '5');\n        expect(bay).to.have.attribute('y', '3');\n        expect(bay).to.have.attribute('w', '7');\n        expect(bay).to.have.attribute('h', '8');\n      });\n\n      describe('with a bay', () => {\n        beforeEach(async () => {\n          const doc = new DOMParser().parseFromString(\n            bayDocString,\n            'application/xml'\n          );\n          element.doc = doc;\n          await element.updateComplete;\n        });\n\n        it('allows resizing bays', async () => {\n          const sldEditor =\n            element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n          const moveHandle =\n            sldEditor.shadowRoot!.querySelectorAll<SVGElement>(\n              'g.bay a.handle'\n            )[1];\n          moveHandle.dispatchEvent(new PointerEvent('click'));\n          expect(element)\n            .property('resizing')\n            .to.exist.and.to.have.property('tagName', 'Bay');\n          const bay = element.resizing!;\n          expect(bay).to.have.attribute('esld:w', '3');\n          expect(bay).to.have.attribute('esld:h', '3');\n          await sendMouse({ type: 'click', position: [400, 400] });\n          expect(bay).to.have.attribute('esld:w', '10');\n          expect(bay).to.have.attribute('esld:h', '9');\n        });\n\n        it('forbids resizing bays out of bounds', async () => {\n          const sldEditor =\n            element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n          const moveHandle =\n            sldEditor.shadowRoot!.querySelectorAll<SVGElement>(\n              'g.bay a.handle'\n            )[1];\n          moveHandle.dispatchEvent(new PointerEvent('click'));\n          expect(element)\n            .property('resizing')\n            .to.exist.and.to.have.property('tagName', 'Bay');\n          const bay = element.resizing!;\n          expect(bay).to.have.attribute('esld:w', '3');\n          expect(bay).to.have.attribute('esld:h', '3');\n          await sendMouse({ type: 'click', position: [600, 400] });\n          expect(bay).to.have.attribute('esld:w', '3');\n          expect(bay).to.have.attribute('esld:h', '3');\n        });\n\n        it('forbids undersizing voltage levels containing bays', async () => {\n          const sldEditor =\n            element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n          const moveHandle = sldEditor.shadowRoot!.querySelectorAll<SVGElement>(\n            'g.voltagelevel > a.handle'\n          )[1];\n          moveHandle.dispatchEvent(new PointerEvent('click'));\n          expect(element)\n            .property('resizing')\n            .to.exist.and.to.have.property('tagName', 'VoltageLevel');\n          const voltageLevel = element.resizing!;\n          expect(voltageLevel).to.have.attribute('esld:w', '13');\n          expect(voltageLevel).to.have.attribute('esld:h', '13');\n          await sendMouse({ type: 'click', position: [100, 100] });\n          expect(voltageLevel).to.have.attribute('esld:w', '13');\n          expect(voltageLevel).to.have.attribute('esld:h', '13');\n        });\n\n        it('allows moving bays', async () => {\n          const sldEditor =\n            element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n          sldEditor\n            .shadowRoot!.querySelector<SVGElement>('g.bay a.handle')!\n            .dispatchEvent(new PointerEvent('click'));\n          expect(element)\n            .property('placing')\n            .to.exist.and.to.have.property('tagName', 'Bay');\n          const bay = element.placing!;\n          await sendMouse({ type: 'click', position: [200, 200] });\n          expect(bay).to.have.attribute('esld:x', '5');\n          expect(bay).to.have.attribute('esld:y', '3');\n        });\n\n        it('renames reparented bays if necessary', async () => {\n          const sldEditor =\n            element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n          sldEditor\n            .shadowRoot!.querySelector<SVGElement>('g.bay a.handle')!\n            .dispatchEvent(new PointerEvent('click'));\n          const bay = element.placing!;\n          expect(bay.parentElement).to.have.attribute('name', 'V1');\n          expect(bay).to.have.attribute('name', 'B1');\n          await sendMouse({ type: 'click', position: [600, 200] });\n          expect(element).to.have.property('placing', undefined);\n          expect(bay).to.have.attribute('esld:x', '18');\n          expect(bay).to.have.attribute('esld:y', '3');\n          expect(bay.parentElement).to.have.attribute('name', 'V2');\n          expect(bay).to.have.attribute('name', 'B2');\n          sldEditor\n            .shadowRoot!.querySelector<SVGElement>('g.bay a.handle')!\n            .dispatchEvent(new PointerEvent('click'));\n          await sendMouse({ type: 'click', position: [200, 200] });\n          expect(bay).to.have.attribute('esld:x', '5');\n          expect(bay).to.have.attribute('esld:y', '3');\n          expect(bay.parentElement).to.have.attribute('name', 'V1');\n          expect(bay).to.have.attribute('name', 'B2');\n        });\n\n        it(\"updates reparented bays' connectivity node paths\", async () => {\n          const sldEditor =\n            element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n          sldEditor\n            .shadowRoot!.querySelector<SVGElement>('g.bay a.handle')!\n            .dispatchEvent(new PointerEvent('click'));\n          const bay = element.placing!;\n          const cNode = bay.querySelector('ConnectivityNode')!;\n          expect(cNode).to.have.attribute('pathName', 'S1/V1/B1/L1');\n          await sendMouse({ type: 'click', position: [600, 200] });\n          expect(element).to.have.property('placing', undefined);\n          expect(cNode).to.have.attribute('pathName', 'S1/V2/B2/L1');\n        });\n\n        it('moves a bay when its parent voltage level is moved', async () => {\n          const sldEditor =\n            element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n          sldEditor\n            .shadowRoot!.querySelector<SVGElement>('g.voltagelevel a.handle')!\n            .dispatchEvent(new PointerEvent('click'));\n          const bay = element.placing!.querySelector('Bay')!;\n          expect(bay).to.have.attribute('esld:x', '2');\n          expect(bay).to.have.attribute('esld:y', '2');\n          await sendMouse({ type: 'click', position: [100, 100] });\n          expect(bay).to.have.attribute('esld:x', '3');\n          expect(bay).to.have.attribute('esld:y', '1');\n        });\n\n        it('allows placing new conducting equipment', async () => {\n          element\n            .shadowRoot!.querySelector<Button>('[label=\"Add CBR\"]')\n            ?.click();\n          expect(element)\n            .property('placing')\n            .to.have.property('tagName', 'ConductingEquipment');\n          await sendMouse({ type: 'click', position: [150, 180] });\n          expect(element).to.have.property('placing', undefined);\n          expect(element).to.have.property('resizing', undefined);\n          const equipment = element.doc.querySelector('ConductingEquipment');\n          expect(equipment).to.exist;\n          expect(equipment).to.have.attribute('x', '3');\n          expect(equipment).to.have.attribute('y', '3');\n        });\n\n        describe('with conducting equipment', () => {\n          beforeEach(async () => {\n            const doc = new DOMParser().parseFromString(\n              equipmentDocString,\n              'application/xml'\n            );\n            element.doc = doc;\n            await element.updateComplete;\n          });\n\n          it('moves equipment on left mouse button click', async () => {\n            const sldEditor =\n              element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n            const equipment = element.doc.querySelector('ConductingEquipment');\n            const id = identity(equipment);\n            const eqClickTarget = sldEditor\n              .shadowRoot!.getElementById(<string>id)!\n              .querySelector('rect')!;\n            expect(equipment).to.not.have.attribute('esld:rot');\n            eqClickTarget.dispatchEvent(new PointerEvent('click'));\n            await sendMouse({ type: 'click', position: [150, 180] });\n            expect(equipment).to.have.attribute('esld:x', '3');\n            expect(equipment).to.have.attribute('esld:y', '3');\n          });\n\n          it('rotates equipment on middle mouse button click', () => {\n            const sldEditor =\n              element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n            const equipment = element.doc.querySelector('ConductingEquipment');\n            const id = identity(equipment);\n            const eqClickTarget = sldEditor\n              .shadowRoot!.getElementById(<string>id)!\n              .querySelector('rect')!;\n            expect(equipment).to.not.have.attribute('esld:rot');\n            eqClickTarget.dispatchEvent(\n              new PointerEvent('auxclick', { button: 1 })\n            );\n            expect(equipment).to.have.attribute('esld:rot', '1');\n          });\n\n          it('displays a menu on equipment right click', async () => {\n            const sldEditor =\n              element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n            const equipment = element.doc.querySelector('ConductingEquipment');\n            const id = identity(equipment);\n            const eqClickTarget = sldEditor\n              .shadowRoot!.getElementById(<string>id)!\n              .querySelector('rect')!;\n            eqClickTarget.dispatchEvent(\n              new PointerEvent('contextmenu', { clientX: 750, clientY: 550 })\n            );\n            await element.updateComplete;\n            expect(sldEditor)\n              .property('menu')\n              .to.exist.and.to.have.property('element', equipment);\n          });\n\n          it('flips the equipment on first menu item select', async () => {\n            const sldEditor =\n              element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n            const equipment = element.doc.querySelector('ConductingEquipment');\n            const id = identity(equipment);\n            let eqClickTarget = sldEditor\n              .shadowRoot!.getElementById(<string>id)!\n              .querySelector('rect')!;\n            eqClickTarget.dispatchEvent(new PointerEvent('contextmenu'));\n            await element.updateComplete;\n            let item = sldEditor.shadowRoot!.querySelector('mwc-list-item')!;\n            expect(equipment).to.not.have.attribute('esld:flip');\n            await sendMouse({ type: 'click', position: middleOf(item) });\n            expect(equipment).to.have.attribute('esld:flip', 'true');\n            eqClickTarget = sldEditor\n              .shadowRoot!.getElementById(<string>id)!\n              .querySelector('rect')!;\n            eqClickTarget.dispatchEvent(new PointerEvent('contextmenu'));\n            await element.updateComplete;\n            item = sldEditor.shadowRoot!.querySelector('mwc-list-item')!;\n            await sendMouse({ type: 'click', position: middleOf(item) });\n            expect(equipment).to.not.have.attribute('esld:flip');\n          });\n\n          it('rotates equipment on second menu item select', async () => {\n            const sldEditor =\n              element.shadowRoot!.querySelector<SLDEditor>('sld-editor')!;\n            const equipment = element.doc.querySelector('ConductingEquipment');\n            const id = identity(equipment);\n            const eqClickTarget = sldEditor\n              .shadowRoot!.getElementById(<string>id)!\n              .querySelector('rect')!;\n            eqClickTarget.dispatchEvent(new PointerEvent('contextmenu'));\n            await element.updateComplete;\n            const item = sldEditor.shadowRoot!.querySelector<ListItem>(\n              'mwc-list-item:nth-of-type(2)'\n            )!;\n            expect(equipment).to.not.have.attribute('esld:rot');\n            item.selected = true;\n            await element.updateComplete;\n            expect(equipment).to.have.attribute('esld:rot', '1');\n          });\n        });\n      });\n    });\n  });\n});\n"]}