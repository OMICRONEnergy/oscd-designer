{"version":3,"file":"oscd-designer.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-element/lit-element.js","../node_modules/lit-html/static.js","../node_modules/@lit/reactive-element/decorators/property.js","../node_modules/@lit/reactive-element/decorators/state.js","../node_modules/@openscd/open-scd-core/dist/foundation/edit-event.js","../node_modules/@lit/reactive-element/decorators/query-assigned-elements.js","../node_modules/@openscd/oscd-scl/dist/utils/tags.js","../node_modules/@openscd/oscd-scl/dist/utils/identity.js","../../icons.ts","../../oscd-designer.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=window,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),n=new WeakMap;class o{constructor(t,e,n){if(this._$cssResult$=!0,n!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=n.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&n.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new o(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,s,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[n+1]),t[0]);return new o(n,t,s)},S=(s,n)=>{e?s.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((e=>{const n=document.createElement(\"style\"),o=t.litNonce;void 0!==o&&n.setAttribute(\"nonce\",o),n.textContent=e.cssText,s.appendChild(n)}))},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{o as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as i}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var s;const e=window,r=e.trustedTypes,h=r?r.emptyScript:\"\",o=e.reactiveElementPolyfillSupport,n={toAttribute(t,i){switch(i){case Boolean:t=t?h:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},a=(t,i)=>i!==t&&(i==i||t==t),l={attribute:!0,type:String,converter:n,reflect:!1,hasChanged:a},d=\"finalized\";class u extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(t){var i;this.finalize(),(null!==(i=this.h)&&void 0!==i?i:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Ep(s,i);void 0!==e&&(this._$Ev.set(e,s),t.push(e))})),t}static createProperty(t,i=l){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s=\"symbol\"==typeof t?Symbol():\"__\"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty(d))return!1;this[d]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(t(i))}else void 0!==i&&s.push(t(i));return s}static _$Ep(t,i){const s=i.attribute;return!1===s?void 0:\"string\"==typeof s?s:\"string\"==typeof t?t.toLowerCase():void 0}_$Eu(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,s;(null!==(i=this._$ES)&&void 0!==i?i:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$ES)||void 0===i||i.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Ei.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$EO(t,i,s=l){var e;const r=this.constructor._$Ep(t,s);if(void 0!==r&&!0===s.reflect){const h=(void 0!==(null===(e=s.converter)||void 0===e?void 0:e.toAttribute)?s.converter:n).toAttribute(i,s.type);this._$El=t,null==h?this.removeAttribute(r):this.setAttribute(r,h),this._$El=null}}_$AK(t,i){var s;const e=this.constructor,r=e._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=e.getPropertyOptions(r),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(s=t.converter)||void 0===s?void 0:s.fromAttribute)?t.converter:n;this._$El=r,this[r]=h.fromAttribute(i,t.type),this._$El=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||a)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,i)=>this[i]=t)),this._$Ei=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$Ek()}catch(t){throw i=!1,this._$Ek(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$ES)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$EO(i,this[i],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}u[d]=!0,u.elementProperties=new Map,u.elementStyles=[],u.shadowRootOptions={mode:\"open\"},null==o||o({ReactiveElement:u}),(null!==(s=e.reactiveElementVersions)&&void 0!==s?s:e.reactiveElementVersions=[]).push(\"1.6.3\");export{u as ReactiveElement,n as defaultConverter,a as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=window,s=i.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,o=\"$lit$\",n=`lit$${(Math.random()+\"\").slice(9)}$`,l=\"?\"+n,h=`<${l}>`,r=document,u=()=>r.createComment(\"\"),d=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,c=Array.isArray,v=t=>c(t)||\"function\"==typeof(null==t?void 0:t[Symbol.iterator]),a=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${a}(?:([^\\\\s\"'>=/]+)(${a}*=${a}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,w=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=w(1),b=w(2),T=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),E=new WeakMap,C=r.createTreeWalker(r,129,null,!1);function P(t,i){if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,e=[];let l,r=2===i?\"<svg>\":\"\",u=f;for(let i=0;i<s;i++){const s=t[i];let d,c,v=-1,a=0;for(;a<s.length&&(u.lastIndex=a,c=u.exec(s),null!==c);)a=u.lastIndex,u===f?\"!--\"===c[1]?u=_:void 0!==c[1]?u=m:void 0!==c[2]?(y.test(c[2])&&(l=RegExp(\"</\"+c[2],\"g\")),u=p):void 0!==c[3]&&(u=p):u===p?\">\"===c[0]?(u=null!=l?l:f,v=-1):void 0===c[1]?v=-2:(v=u.lastIndex-c[2].length,d=c[1],u=void 0===c[3]?p:'\"'===c[3]?$:g):u===$||u===g?u=p:u===_||u===m?u=f:(u=p,l=void 0);const w=u===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=u===f?s+h:v>=0?(e.push(d),s.slice(0,v)+o+s.slice(v)+n+w):s+n+(-2===v?(e.push(void 0),i):w)}return[P(t,r+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\")),e]};class N{constructor({strings:t,_$litType$:i},e){let h;this.parts=[];let r=0,d=0;const c=t.length-1,v=this.parts,[a,f]=V(t,i);if(this.el=N.createElement(a,e),C.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(h=C.nextNode())&&v.length<c;){if(1===h.nodeType){if(h.hasAttributes()){const t=[];for(const i of h.getAttributeNames())if(i.endsWith(o)||i.startsWith(n)){const s=f[d++];if(t.push(i),void 0!==s){const t=h.getAttribute(s.toLowerCase()+o).split(n),i=/([.?@])?(.*)/.exec(s);v.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?H:\"?\"===i[1]?L:\"@\"===i[1]?z:k})}else v.push({type:6,index:r})}for(const i of t)h.removeAttribute(i)}if(y.test(h.tagName)){const t=h.textContent.split(n),i=t.length-1;if(i>0){h.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)h.append(t[s],u()),C.nextNode(),v.push({type:2,index:++r});h.append(t[i],u())}}}else if(8===h.nodeType)if(h.data===l)v.push({type:2,index:r});else{let t=-1;for(;-1!==(t=h.data.indexOf(n,t+1));)v.push({type:7,index:r}),t+=n.length-1}r++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){var o,n,l,h;if(i===T)return i;let r=void 0!==e?null===(o=s._$Co)||void 0===o?void 0:o[e]:s._$Cl;const u=d(i)?void 0:i._$litDirective$;return(null==r?void 0:r.constructor)!==u&&(null===(n=null==r?void 0:r._$AO)||void 0===n||n.call(r,!1),void 0===u?r=void 0:(r=new u(t),r._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Co)&&void 0!==l?l:h._$Co=[])[e]=r:s._$Cl=r),void 0!==r&&(i=S(t,r._$AS(t,i.values),r,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:r).importNode(s,!0);C.currentNode=o;let n=C.nextNode(),l=0,h=0,u=e[0];for(;void 0!==u;){if(l===u.index){let i;2===u.type?i=new R(n,n.nextSibling,this,t):1===u.type?i=new u.ctor(n,u.name,u.strings,this,t):6===u.type&&(i=new Z(n,this,t)),this._$AV.push(i),u=e[++h]}l!==(null==u?void 0:u.index)&&(n=C.nextNode(),l++)}return C.currentNode=r,o}v(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{constructor(t,i,s,e){var o;this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cp=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===(null==t?void 0:t.nodeType)&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),d(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):v(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==A&&d(this._$AH)?this._$AA.nextSibling.data=t:this.$(r.createTextNode(t)),this._$AH=t}g(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=N.createElement(P(e.h,e.h[0]),this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.v(s);else{const t=new M(o,this),i=t.u(this.options);t.v(s),this.$(i),this._$AH=t}}_$AC(t){let i=E.get(t.strings);return void 0===i&&E.set(t.strings,i=new N(t)),i}T(t){c(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new R(this.k(u()),this.k(u()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cp=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class k{constructor(t,i,s,e,o){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=S(this,t,i,0),n=!d(t)||t!==this._$AH&&t!==T,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=S(this,e[s+l],i,l),h===T&&(h=this._$AH[l]),n||(n=!d(h)||h!==this._$AH[l]),h===A?t=A:t!==A&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}const I=s?s.emptyScript:\"\";class L extends k{constructor(){super(...arguments),this.type=4}j(t){t&&t!==A?this.element.setAttribute(this.name,I):this.element.removeAttribute(this.name)}}class z extends k{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=S(this,t,i,0))&&void 0!==s?s:A)===T)return;const e=this._$AH,o=t===A&&e!==A||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==A&&(e===A||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const j={O:o,P:n,A:l,C:1,M:V,L:M,R:v,D:S,I:R,V:k,H:L,N:z,U:H,F:Z},B=i.litHtmlPolyfillSupport;null==B||B(N,R),(null!==(t=i.litHtmlVersions)&&void 0!==t?t:i.litHtmlVersions=[]).push(\"2.8.0\");const D=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new R(i.insertBefore(u(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l};export{j as _$LH,x as html,T as noChange,A as nothing,D as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var l,o;const r=t;class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return i}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;null==n||n({LitElement:s});const h={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push(\"3.3.3\");export{s as LitElement,r as UpdatingElement,h as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","import{html as t,svg as r}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=Symbol.for(\"\"),l=t=>{if((null==t?void 0:t.r)===e)return null==t?void 0:t._$litStatic$},o=t=>({_$litStatic$:t,r:e}),i=(t,...r)=>({_$litStatic$:r.reduce(((r,e,l)=>r+(t=>{if(void 0!==t._$litStatic$)return t._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t}. Use 'unsafeStatic' to pass non-literal values, but\\n            take care to ensure page security.`)})(e)+t[l+1]),t[0]),r:e}),s=new Map,a=t=>(r,...e)=>{const o=e.length;let i,a;const n=[],u=[];let c,$=0,f=!1;for(;$<o;){for(c=r[$];$<o&&void 0!==(a=e[$],i=l(a));)c+=i+r[++$],f=!0;$!==o&&u.push(a),n.push(c),$++}if($===o&&n.push(r[o]),f){const t=n.join(\"$$lit$$\");void 0===(r=s.get(t))&&(n.raw=n,s.set(t,r=n)),e=u}return t(r,...e)},n=a(t),u=a(r);export{n as html,i as literal,u as svg,o as unsafeStatic,a as withStatic};\n//# sourceMappingURL=static.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst i=(i,e)=>\"method\"===e.kind&&e.descriptor&&!(\"value\"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,i)}}:{kind:\"field\",key:Symbol(),placement:\"own\",descriptor:{},originalKey:e.key,initializer(){\"function\"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,i)}},e=(i,e,n)=>{e.constructor.createProperty(n,i)};function n(n){return(t,o)=>void 0!==o?e(n,t,o):i(n,t)}export{n as property};\n//# sourceMappingURL=property.js.map\n","import{property as r}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function t(t){return r({...t,state:!0})}export{t as state};\n//# sourceMappingURL=state.js.map\n","export function isComplex(edit) {\n    return edit instanceof Array;\n}\nexport function isInsert(edit) {\n    return edit.parent !== undefined;\n}\nexport function isNamespaced(value) {\n    return value !== null && typeof value !== 'string';\n}\nexport function isUpdate(edit) {\n    return edit.element !== undefined;\n}\nexport function isRemove(edit) {\n    return (edit.parent === undefined && edit.node !== undefined);\n}\nexport function newEditEvent(edit) {\n    return new CustomEvent('oscd-edit', {\n        composed: true,\n        bubbles: true,\n        detail: edit,\n    });\n}\n/** EDIT HANDLING */\nfunction localAttributeName(attribute) {\n    return attribute.includes(':') ? attribute.split(':', 2)[1] : attribute;\n}\nfunction handleInsert({ parent, node, reference, }) {\n    try {\n        const { parentNode, nextSibling } = node;\n        parent.insertBefore(node, reference);\n        if (parentNode)\n            return {\n                node,\n                parent: parentNode,\n                reference: nextSibling,\n            };\n        return { node };\n    }\n    catch (e) {\n        // do nothing if insert doesn't work on these nodes\n        return [];\n    }\n}\nfunction handleUpdate({ element, attributes }) {\n    const oldAttributes = { ...attributes };\n    Object.entries(attributes)\n        .reverse()\n        .forEach(([name, value]) => {\n        var _a;\n        let oldAttribute;\n        if (isNamespaced(value))\n            oldAttribute = {\n                value: element.getAttributeNS(value.namespaceURI, localAttributeName(name)),\n                namespaceURI: value.namespaceURI,\n            };\n        else\n            oldAttribute = ((_a = element.getAttributeNode(name)) === null || _a === void 0 ? void 0 : _a.namespaceURI)\n                ? {\n                    value: element.getAttribute(name),\n                    namespaceURI: element.getAttributeNode(name).namespaceURI,\n                }\n                : element.getAttribute(name);\n        oldAttributes[name] = oldAttribute;\n    });\n    for (const entry of Object.entries(attributes)) {\n        try {\n            const [attribute, value] = entry;\n            if (isNamespaced(value)) {\n                if (value.value === null)\n                    element.removeAttributeNS(value.namespaceURI, localAttributeName(attribute));\n                else\n                    element.setAttributeNS(value.namespaceURI, attribute, value.value);\n            }\n            else if (value === null)\n                element.removeAttribute(attribute);\n            else\n                element.setAttribute(attribute, value);\n        }\n        catch (e) {\n            // do nothing if update doesn't work on this attribute\n            delete oldAttributes[entry[0]];\n        }\n    }\n    return {\n        element,\n        attributes: oldAttributes,\n    };\n}\nfunction handleRemove({ node }) {\n    var _a;\n    const { parentNode: parent, nextSibling: reference } = node;\n    (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(node);\n    if (parent)\n        return {\n            node,\n            parent,\n            reference,\n        };\n    return [];\n}\nexport function handleEdit(edit) {\n    if (isInsert(edit))\n        return handleInsert(edit);\n    if (isUpdate(edit))\n        return handleUpdate(edit);\n    if (isRemove(edit))\n        return handleRemove(edit);\n    if (isComplex(edit))\n        return edit.map(handleEdit).reverse();\n    return [];\n}\n//# sourceMappingURL=edit-event.js.map","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var n;const e=null!=(null===(n=window.HTMLSlotElement)||void 0===n?void 0:n.prototype.assignedElements)?(o,n)=>o.assignedElements(n):(o,n)=>o.assignedNodes(n).filter((o=>o.nodeType===Node.ELEMENT_NODE));function l(n){const{slot:l,selector:t}=null!=n?n:{};return o({descriptor:o=>({get(){var o;const r=\"slot\"+(l?`[name=${l}]`:\":not([name])\"),i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(r),s=null!=i?e(i,n):[];return t?s.filter((o=>o.matches(t))):s},enumerable:!0,configurable:!0})})}export{l as queryAssignedElements};\n//# sourceMappingURL=query-assigned-elements.js.map\n","const tAbstractConductingEquipment = [\n    'TransformerWinding',\n    'ConductingEquipment',\n];\nconst tEquipment = [\n    'GeneralEquipment',\n    'PowerTransformer',\n    ...tAbstractConductingEquipment,\n];\nconst tEquipmentContainer = ['Substation', 'VoltageLevel', 'Bay'];\nconst tGeneralEquipmentContainer = ['Process', 'Line'];\nconst tAbstractEqFuncSubFunc = ['EqSubFunction', 'EqFunction'];\nconst tPowerSystemResource = [\n    'SubFunction',\n    'Function',\n    'TapChanger',\n    'SubEquipment',\n    ...tEquipment,\n    ...tEquipmentContainer,\n    ...tGeneralEquipmentContainer,\n    ...tAbstractEqFuncSubFunc,\n];\nconst tLNodeContainer = ['ConnectivityNode', ...tPowerSystemResource];\nconst tCertificate = ['GOOSESecurity', 'SMVSecurity'];\nconst tNaming = ['SubNetwork', ...tCertificate, ...tLNodeContainer];\nconst tAbstractDataAttribute = ['BDA', 'DA'];\nconst tControlWithIEDName = ['SampledValueControl', 'GSEControl'];\nconst tControlWithTriggerOpt = ['LogControl', 'ReportControl'];\nconst tControl = [...tControlWithIEDName, ...tControlWithTriggerOpt];\nconst tControlBlock = ['GSE', 'SMV'];\nconst tUnNaming = [\n    'ConnectedAP',\n    'PhysConn',\n    'SDO',\n    'DO',\n    'DAI',\n    'SDI',\n    'DOI',\n    'Inputs',\n    'RptEnabled',\n    'Server',\n    'ServerAt',\n    'SettingControl',\n    'Communication',\n    'Log',\n    'LDevice',\n    'DataSet',\n    'AccessPoint',\n    'IED',\n    'NeutralPoint',\n    ...tControl,\n    ...tControlBlock,\n    ...tAbstractDataAttribute,\n];\nconst tAnyLN = ['LN0', 'LN'];\nconst tAnyContentFromOtherNamespace = [\n    'Text',\n    'Private',\n    'Hitem',\n    'AccessControl',\n];\nconst tCert = ['Subject', 'IssuerName'];\nconst tDurationInMilliSec = ['MinTime', 'MaxTime'];\nconst tIDNaming = ['LNodeType', 'DOType', 'DAType', 'EnumType'];\nconst tServiceYesNo = [\n    'FileHandling',\n    'TimeSyncProt',\n    'CommProt',\n    'SGEdit',\n    'ConfSG',\n    'GetDirectory',\n    'GetDataObjectDefinition',\n    'DataObjectDirectory',\n    'GetDataSetValue',\n    'SetDataSetValue',\n    'DataSetDirectory',\n    'ReadWrite',\n    'TimerActivatedControl',\n    'GetCBValues',\n    'GSEDir',\n    'ConfLdName',\n];\nconst tServiceWithMaxAndMaxAttributes = ['DynDataSet', 'ConfDataSet'];\nconst tServiceWithMax = [\n    'GSSE',\n    'GOOSE',\n    'ConfReportControl',\n    'SMVsc',\n    ...tServiceWithMaxAndMaxAttributes,\n];\nconst tServiceWithMaxNonZero = ['ConfLogControl', 'ConfSigRef'];\nconst tServiceSettings = [\n    'ReportSettings',\n    'LogSettings',\n    'GSESettings',\n    'SMVSettings',\n];\nconst tBaseElement = ['SCL', ...tNaming, ...tUnNaming, ...tIDNaming];\nconst sCLTags = [\n    ...tBaseElement,\n    ...tAnyContentFromOtherNamespace,\n    'Header',\n    'LNode',\n    'Val',\n    'Voltage',\n    'Services',\n    ...tCert,\n    ...tDurationInMilliSec,\n    'Association',\n    'FCDA',\n    'ClientLN',\n    'IEDName',\n    'ExtRef',\n    'Protocol',\n    ...tAnyLN,\n    ...tServiceYesNo,\n    'DynAssociation',\n    'SettingGroups',\n    ...tServiceWithMax,\n    ...tServiceWithMaxNonZero,\n    ...tServiceSettings,\n    'ConfLNs',\n    'ClientServices',\n    'SupSubscription',\n    'ValueHandling',\n    'RedProt',\n    'McSecurity',\n    'KDC',\n    'Address',\n    'P',\n    'ProtNs',\n    'EnumVal',\n    'Terminal',\n    'BitRate',\n    'Authentication',\n    'DataTypeTemplates',\n    'History',\n    'OptFields',\n    'SmvOpts',\n    'TrgOps',\n    'SamplesPerSec',\n    'SmpRate',\n    'SecPerSamples',\n];\nconst tBaseNameSequence = ['Text', 'Private'];\nconst tNamingSequence = [...tBaseNameSequence];\nconst tUnNamingSequence = [...tBaseNameSequence];\nconst tIDNamingSequence = [...tBaseNameSequence];\nconst tAbstractDataAttributeSequence = [...tUnNamingSequence, 'Val'];\nconst tLNodeContainerSequence = [...tNamingSequence, 'LNode'];\nconst tPowerSystemResourceSequence = [...tLNodeContainerSequence];\nconst tEquipmentSequence = [...tPowerSystemResourceSequence];\nconst tEquipmentContainerSequence = [\n    ...tPowerSystemResourceSequence,\n    'PowerTransformer',\n    'GeneralEquipment',\n];\nconst tAbstractConductingEquipmentSequence = [\n    ...tEquipmentSequence,\n    'Terminal',\n];\nconst tControlBlockSequence = [...tUnNamingSequence, 'Address'];\nconst tControlSequence = [...tNamingSequence];\nconst tControlWithIEDNameSequence = [...tControlSequence, 'IEDName'];\nconst tAnyLNSequence = [\n    ...tUnNamingSequence,\n    'DataSet',\n    'ReportControl',\n    'LogControl',\n    'DOI',\n    'Inputs',\n    'Log',\n];\nconst tGeneralEquipmentContainerSequence = [\n    ...tPowerSystemResourceSequence,\n    'GeneralEquipment',\n    'Function',\n];\nconst tControlWithTriggerOptSequence = [...tControlSequence, 'TrgOps'];\nconst tAbstractEqFuncSubFuncSequence = [\n    ...tPowerSystemResourceSequence,\n    'GeneralEquipment',\n    'EqSubFunction',\n];\nconst tags = {\n    AccessControl: {\n        parents: ['LDevice'],\n        children: [],\n    },\n    AccessPoint: {\n        parents: ['IED'],\n        children: [\n            ...tNamingSequence,\n            'Server',\n            'LN',\n            'ServerAt',\n            'Services',\n            'GOOSESecurity',\n            'SMVSecurity',\n        ],\n    },\n    Address: {\n        parents: ['ConnectedAP', 'GSE', 'SMV'],\n        children: ['P'],\n    },\n    Association: {\n        parents: ['Server'],\n        children: [],\n    },\n    Authentication: {\n        parents: ['Server'],\n        children: [],\n    },\n    BDA: {\n        parents: ['DAType'],\n        children: [...tAbstractDataAttributeSequence],\n    },\n    BitRate: {\n        parents: ['SubNetwork'],\n        children: [],\n    },\n    Bay: {\n        parents: ['VoltageLevel'],\n        children: [\n            ...tEquipmentContainerSequence,\n            'ConductingEquipment',\n            'ConnectivityNode',\n            'Function',\n        ],\n    },\n    ClientLN: {\n        parents: ['RptEnabled'],\n        children: [],\n    },\n    ClientServices: {\n        parents: ['Services'],\n        children: ['TimeSyncProt', 'McSecurity'],\n    },\n    CommProt: {\n        parents: ['Services'],\n        children: [],\n    },\n    Communication: {\n        parents: ['SCL'],\n        children: [...tUnNamingSequence, 'SubNetwork'],\n    },\n    ConductingEquipment: {\n        parents: ['Process', 'Line', 'SubFunction', 'Function', 'Bay'],\n        children: [\n            ...tAbstractConductingEquipmentSequence,\n            'EqFunction',\n            'SubEquipment',\n        ],\n    },\n    ConfDataSet: {\n        parents: ['Services'],\n        children: [],\n    },\n    ConfLdName: {\n        parents: ['Services'],\n        children: [],\n    },\n    ConfLNs: {\n        parents: ['Services'],\n        children: [],\n    },\n    ConfLogControl: {\n        parents: ['Services'],\n        children: [],\n    },\n    ConfReportControl: {\n        parents: ['Services'],\n        children: [],\n    },\n    ConfSG: {\n        parents: ['SettingGroups'],\n        children: [],\n    },\n    ConfSigRef: {\n        parents: ['Services'],\n        children: [],\n    },\n    ConnectedAP: {\n        parents: ['SubNetwork'],\n        children: [...tUnNamingSequence, 'Address', 'GSE', 'SMV', 'PhysConn'],\n    },\n    ConnectivityNode: {\n        parents: ['Bay', 'Line'],\n        children: [...tLNodeContainerSequence],\n    },\n    DA: {\n        parents: ['DOType'],\n        children: [...tAbstractDataAttributeSequence],\n    },\n    DAI: {\n        parents: ['DOI', 'SDI'],\n        children: [...tUnNamingSequence, 'Val'],\n    },\n    DAType: {\n        parents: ['DataTypeTemplates'],\n        children: [...tIDNamingSequence, 'BDA', 'ProtNs'],\n    },\n    DO: {\n        parents: ['LNodeType'],\n        children: [...tUnNamingSequence],\n    },\n    DOI: {\n        parents: [...tAnyLN],\n        children: [...tUnNamingSequence, 'SDI', 'DAI'],\n    },\n    DOType: {\n        parents: ['DataTypeTemplates'],\n        children: [...tIDNamingSequence, 'SDO', 'DA'],\n    },\n    DataObjectDirectory: {\n        parents: ['Services'],\n        children: [],\n    },\n    DataSet: {\n        parents: [...tAnyLN],\n        children: [...tNamingSequence, 'FCDA'],\n    },\n    DataSetDirectory: {\n        parents: ['Services'],\n        children: [],\n    },\n    DataTypeTemplates: {\n        parents: ['SCL'],\n        children: ['LNodeType', 'DOType', 'DAType', 'EnumType'],\n    },\n    DynAssociation: {\n        parents: ['Services'],\n        children: [],\n    },\n    DynDataSet: {\n        parents: ['Services'],\n        children: [],\n    },\n    EnumType: {\n        parents: ['DataTypeTemplates'],\n        children: [...tIDNamingSequence, 'EnumVal'],\n    },\n    EnumVal: {\n        parents: ['EnumType'],\n        children: [],\n    },\n    EqFunction: {\n        parents: [\n            'GeneralEquipment',\n            'TapChanger',\n            'TransformerWinding',\n            'PowerTransformer',\n            'SubEquipment',\n            'ConductingEquipment',\n        ],\n        children: [...tAbstractEqFuncSubFuncSequence],\n    },\n    EqSubFunction: {\n        parents: ['EqSubFunction', 'EqFunction'],\n        children: [...tAbstractEqFuncSubFuncSequence],\n    },\n    ExtRef: {\n        parents: ['Inputs'],\n        children: [],\n    },\n    FCDA: {\n        parents: ['DataSet'],\n        children: [],\n    },\n    FileHandling: {\n        parents: ['Services'],\n        children: [],\n    },\n    Function: {\n        parents: ['Bay', 'VoltageLevel', 'Substation', 'Process', 'Line'],\n        children: [\n            ...tPowerSystemResourceSequence,\n            'SubFunction',\n            'GeneralEquipment',\n            'ConductingEquipment',\n        ],\n    },\n    GeneralEquipment: {\n        parents: [\n            'SubFunction',\n            'Function',\n            ...tGeneralEquipmentContainer,\n            ...tAbstractEqFuncSubFunc,\n            ...tEquipmentContainer,\n        ],\n        children: [...tEquipmentSequence, 'EqFunction'],\n    },\n    GetCBValues: {\n        parents: ['Services'],\n        children: [],\n    },\n    GetDataObjectDefinition: {\n        parents: ['Services'],\n        children: [],\n    },\n    GetDataSetValue: {\n        parents: ['Services'],\n        children: [],\n    },\n    GetDirectory: {\n        parents: ['Services'],\n        children: [],\n    },\n    GOOSE: {\n        parents: ['Services'],\n        children: [],\n    },\n    GOOSESecurity: {\n        parents: ['AccessPoint'],\n        children: [...tNamingSequence, 'Subject', 'IssuerName'],\n    },\n    GSE: {\n        parents: ['ConnectedAP'],\n        children: [...tControlBlockSequence, 'MinTime', 'MaxTime'],\n    },\n    GSEDir: {\n        parents: ['Services'],\n        children: [],\n    },\n    GSEControl: {\n        parents: ['LN0'],\n        children: [...tControlWithIEDNameSequence, 'Protocol'],\n    },\n    GSESettings: {\n        parents: ['Services'],\n        children: [],\n    },\n    GSSE: {\n        parents: ['Services'],\n        children: [],\n    },\n    Header: {\n        parents: ['SCL'],\n        children: ['Text', 'History'],\n    },\n    History: {\n        parents: ['Header'],\n        children: ['Hitem'],\n    },\n    Hitem: {\n        parents: ['History'],\n        children: [],\n    },\n    IED: {\n        parents: ['SCL'],\n        children: [...tUnNamingSequence, 'Services', 'AccessPoint', 'KDC'],\n    },\n    IEDName: {\n        parents: ['GSEControl', 'SampledValueControl'],\n        children: [],\n    },\n    Inputs: {\n        parents: [...tAnyLN],\n        children: [...tUnNamingSequence, 'ExtRef'],\n    },\n    IssuerName: {\n        parents: ['GOOSESecurity', 'SMVSecurity'],\n        children: [],\n    },\n    KDC: {\n        parents: ['IED'],\n        children: [],\n    },\n    LDevice: {\n        parents: ['Server'],\n        children: [...tUnNamingSequence, 'LN0', 'LN', 'AccessControl'],\n    },\n    LN: {\n        parents: ['AccessPoint', 'LDevice'],\n        children: [...tAnyLNSequence],\n    },\n    LN0: {\n        parents: ['LDevice'],\n        children: [\n            ...tAnyLNSequence,\n            'GSEControl',\n            'SampledValueControl',\n            'SettingControl',\n        ],\n    },\n    LNode: {\n        parents: [...tLNodeContainer],\n        children: [...tUnNamingSequence],\n    },\n    LNodeType: {\n        parents: ['DataTypeTemplates'],\n        children: [...tIDNamingSequence, 'DO'],\n    },\n    Line: {\n        parents: ['Process', 'SCL'],\n        children: [\n            ...tGeneralEquipmentContainerSequence,\n            'Voltage',\n            'ConductingEquipment',\n        ],\n    },\n    Log: {\n        parents: [...tAnyLN],\n        children: [...tUnNamingSequence],\n    },\n    LogControl: {\n        parents: [...tAnyLN],\n        children: [...tControlWithTriggerOptSequence],\n    },\n    LogSettings: {\n        parents: ['Services'],\n        children: [],\n    },\n    MaxTime: {\n        parents: ['GSE'],\n        children: [],\n    },\n    McSecurity: {\n        parents: ['GSESettings', 'SMVSettings', 'ClientServices'],\n        children: [],\n    },\n    MinTime: {\n        parents: ['GSE'],\n        children: [],\n    },\n    NeutralPoint: {\n        parents: ['TransformerWinding'],\n        children: [...tUnNamingSequence],\n    },\n    OptFields: {\n        parents: ['ReportControl'],\n        children: [],\n    },\n    P: {\n        parents: ['Address', 'PhysConn'],\n        children: [],\n    },\n    PhysConn: {\n        parents: ['ConnectedAP'],\n        children: [...tUnNamingSequence, 'P'],\n    },\n    PowerTransformer: {\n        parents: [...tEquipmentContainer],\n        children: [\n            ...tEquipmentSequence,\n            'TransformerWinding',\n            'SubEquipment',\n            'EqFunction',\n        ],\n    },\n    Private: {\n        parents: [],\n        children: [],\n    },\n    Process: {\n        parents: ['Process', 'SCL'],\n        children: [\n            ...tGeneralEquipmentContainerSequence,\n            'ConductingEquipment',\n            'Substation',\n            'Line',\n            'Process',\n        ],\n    },\n    ProtNs: {\n        parents: ['DAType', 'DA'],\n        children: [],\n    },\n    Protocol: {\n        parents: ['GSEControl', 'SampledValueControl'],\n        children: [],\n    },\n    ReadWrite: {\n        parents: ['Services'],\n        children: [],\n    },\n    RedProt: {\n        parents: ['Services'],\n        children: [],\n    },\n    ReportControl: {\n        parents: [...tAnyLN],\n        children: [...tControlWithTriggerOptSequence, 'OptFields', 'RptEnabled'],\n    },\n    ReportSettings: {\n        parents: ['Services'],\n        children: [],\n    },\n    RptEnabled: {\n        parents: ['ReportControl'],\n        children: [...tUnNamingSequence, 'ClientLN'],\n    },\n    SamplesPerSec: {\n        parents: ['SMVSettings'],\n        children: [],\n    },\n    SampledValueControl: {\n        parents: ['LN0'],\n        children: [...tControlWithIEDNameSequence, 'SmvOpts'],\n    },\n    SecPerSamples: {\n        parents: ['SMVSettings'],\n        children: [],\n    },\n    SCL: {\n        parents: [],\n        children: [\n            ...tBaseNameSequence,\n            'Header',\n            'Substation',\n            'Communication',\n            'IED',\n            'DataTypeTemplates',\n            'Line',\n            'Process',\n        ],\n    },\n    SDI: {\n        parents: ['DOI', 'SDI'],\n        children: [...tUnNamingSequence, 'SDI', 'DAI'],\n    },\n    SDO: {\n        parents: ['DOType'],\n        children: [...tNamingSequence],\n    },\n    Server: {\n        parents: ['AccessPoint'],\n        children: [\n            ...tUnNamingSequence,\n            'Authentication',\n            'LDevice',\n            'Association',\n        ],\n    },\n    ServerAt: {\n        parents: ['AccessPoint'],\n        children: [...tUnNamingSequence],\n    },\n    Services: {\n        parents: ['IED', 'AccessPoint'],\n        children: [\n            'DynAssociation',\n            'SettingGroups',\n            'GetDirectory',\n            'GetDataObjectDefinition',\n            'DataObjectDirectory',\n            'GetDataSetValue',\n            'SetDataSetValue',\n            'DataSetDirectory',\n            'ConfDataSet',\n            'DynDataSet',\n            'ReadWrite',\n            'TimerActivatedControl',\n            'ConfReportControl',\n            'GetCBValues',\n            'ConfLogControl',\n            'ReportSettings',\n            'LogSettings',\n            'GSESettings',\n            'SMVSettings',\n            'GSEDir',\n            'GOOSE',\n            'GSSE',\n            'SMVsc',\n            'FileHandling',\n            'ConfLNs',\n            'ClientServices',\n            'ConfLdName',\n            'SupSubscription',\n            'ConfSigRef',\n            'ValueHandling',\n            'RedProt',\n            'TimeSyncProt',\n            'CommProt',\n        ],\n    },\n    SetDataSetValue: {\n        parents: ['Services'],\n        children: [],\n    },\n    SettingControl: {\n        parents: ['LN0'],\n        children: [...tUnNamingSequence],\n    },\n    SettingGroups: {\n        parents: ['Services'],\n        children: ['SGEdit', 'ConfSG'],\n    },\n    SGEdit: {\n        parents: ['SettingGroups'],\n        children: [],\n    },\n    SmpRate: {\n        parents: ['SMVSettings'],\n        children: [],\n    },\n    SMV: {\n        parents: ['ConnectedAP'],\n        children: [...tControlBlockSequence],\n    },\n    SmvOpts: {\n        parents: ['SampledValueControl'],\n        children: [],\n    },\n    SMVsc: {\n        parents: ['Services'],\n        children: [],\n    },\n    SMVSecurity: {\n        parents: ['AccessPoint'],\n        children: [...tNamingSequence, 'Subject', 'IssuerName'],\n    },\n    SMVSettings: {\n        parents: ['Services'],\n        children: ['SmpRate', 'SamplesPerSec', 'SecPerSamples', 'McSecurity'],\n    },\n    SubEquipment: {\n        parents: [\n            'TapChanger',\n            'PowerTransformer',\n            'ConductingEquipment',\n            'TransformerWinding',\n            ...tAbstractConductingEquipment,\n        ],\n        children: [...tPowerSystemResourceSequence, 'EqFunction'],\n    },\n    SubFunction: {\n        parents: ['SubFunction', 'Function'],\n        children: [\n            ...tPowerSystemResourceSequence,\n            'GeneralEquipment',\n            'ConductingEquipment',\n            'SubFunction',\n        ],\n    },\n    SubNetwork: {\n        parents: ['Communication'],\n        children: [...tNamingSequence, 'BitRate', 'ConnectedAP'],\n    },\n    Subject: {\n        parents: ['GOOSESecurity', 'SMVSecurity'],\n        children: [],\n    },\n    Substation: {\n        parents: ['SCL'],\n        children: [...tEquipmentContainerSequence, 'VoltageLevel', 'Function'],\n    },\n    SupSubscription: {\n        parents: ['Services'],\n        children: [],\n    },\n    TapChanger: {\n        parents: ['TransformerWinding'],\n        children: [...tPowerSystemResourceSequence, 'SubEquipment', 'EqFunction'],\n    },\n    Terminal: {\n        parents: [...tEquipment],\n        children: [...tUnNamingSequence],\n    },\n    Text: {\n        parents: sCLTags.filter(tag => tag !== 'Text' && tag !== 'Private'),\n        children: [],\n    },\n    TimerActivatedControl: {\n        parents: ['Services'],\n        children: [],\n    },\n    TimeSyncProt: {\n        parents: ['Services', 'ClientServices'],\n        children: [],\n    },\n    TransformerWinding: {\n        parents: ['PowerTransformer'],\n        children: [\n            ...tAbstractConductingEquipmentSequence,\n            'TapChanger',\n            'NeutralPoint',\n            'EqFunction',\n            'SubEquipment',\n        ],\n    },\n    TrgOps: {\n        parents: ['ReportControl'],\n        children: [],\n    },\n    Val: {\n        parents: ['DAI', 'DA', 'BDA'],\n        children: [],\n    },\n    ValueHandling: {\n        parents: ['Services'],\n        children: [],\n    },\n    Voltage: {\n        parents: ['VoltageLevel'],\n        children: [],\n    },\n    VoltageLevel: {\n        parents: ['Substation'],\n        children: [...tEquipmentContainerSequence, 'Voltage', 'Bay', 'Function'],\n    },\n};\nconst tagSet = new Set(sCLTags);\nexport function isSCLTag(tag) {\n    return tagSet.has(tag);\n}\n/** @returns parent `tagName` s for SCL (2007B4) element tag  */\n/** export function parentTags(tagName: string): string[] {\n  if (!isSCLTag(tagName)) return [];\n\n  return tags[tagName].parents;\n} */\n/** @returns child `tagName`s for SCL (2007B4) element tag */\n/** export function childTags(tagName: string): string[] {\n  if (!isSCLTag(tagName)) return [];\n\n  return tags[tagName].children;\n} */\n/** @returns Reference for new [[`tag`]] child within [[`parent`]]  or `null` */\nexport function getReference(parent, tag) {\n    if (!isSCLTag(tag))\n        return null;\n    const parentTag = parent.tagName;\n    const children = Array.from(parent.children);\n    if (parentTag === 'Services' ||\n        parentTag === 'SettingGroups' ||\n        !isSCLTag(parentTag))\n        return children.find(child => child.tagName === tag) ?? null;\n    const sequence = tags[parentTag].children;\n    let index = sequence.findIndex(element => element === tag);\n    if (index < 0)\n        return null;\n    let nextSibling;\n    while (index < sequence.length && !nextSibling) {\n        // eslint-disable-next-line no-loop-func\n        nextSibling = children.find(child => child.tagName === sequence[index]);\n        index += 1;\n    }\n    return nextSibling ?? null;\n}\n//# sourceMappingURL=tags.js.map","/* eslint-disable no-use-before-define */\nimport { isSCLTag } from './tags.js';\nfunction hitemIdentity(e) {\n    return `${e.getAttribute('version')}\\t${e.getAttribute('revision')}`;\n}\nfunction terminalIdentity(e) {\n    return `${identity(e.parentElement)}>${e.getAttribute('connectivityNode')}`;\n}\nfunction lNodeIdentity(e) {\n    const [iedName, ldInst, prefix, lnClass, lnInst, lnType] = [\n        'iedName',\n        'ldInst',\n        'prefix',\n        'lnClass',\n        'lnInst',\n        'lnType',\n    ].map(name => e.getAttribute(name));\n    if (iedName === 'None')\n        return `${identity(e.parentElement)}>(${lnClass} ${lnType})`;\n    return `${iedName} ${ldInst || '(Client)'}/${prefix ?? ''} ${lnClass} ${lnInst ?? ''}`;\n}\nfunction kDCIdentity(e) {\n    return `${identity(e.parentElement)}>${e.getAttribute('iedName')} ${e.getAttribute('apName')}`;\n}\nfunction associationIdentity(e) {\n    const [iedName, ldInst, prefix, lnClass, lnInst] = [\n        'iedName',\n        'ldInst',\n        'prefix',\n        'lnClass',\n        'lnInst',\n        'lnType',\n    ].map(name => e.getAttribute(name));\n    return `${identity(e.parentElement)}>${iedName} ${ldInst}/${prefix ?? ''} ${lnClass} ${lnInst ?? ''}`;\n}\nfunction lDeviceIdentity(e) {\n    return `${identity(e.closest('IED'))}>>${e.getAttribute('inst')}`;\n}\nfunction iEDNameIdentity(e) {\n    const iedName = e.textContent;\n    const [apRef, ldInst, prefix, lnClass, lnInst] = [\n        'apRef',\n        'ldInst',\n        'prefix',\n        'lnClass',\n        'lnInst',\n    ].map(name => e.getAttribute(name));\n    return `${identity(e.parentElement)}>${iedName} ${apRef || ''} ${ldInst || ''}/${prefix ?? ''} ${lnClass ?? ''} ${lnInst ?? ''}`;\n}\nfunction fCDAIdentity(e) {\n    const [ldInst, prefix, lnClass, lnInst, doName, daName, fc, ix] = [\n        'ldInst',\n        'prefix',\n        'lnClass',\n        'lnInst',\n        'doName',\n        'daName',\n        'fc',\n        'ix',\n    ].map(name => e.getAttribute(name));\n    const dataPath = `${ldInst}/${prefix ?? ''} ${lnClass} ${lnInst ?? ''}.${doName} ${daName || ''}`;\n    return `${identity(e.parentElement)}>${dataPath} (${fc}${ix ? ` [${ix}]` : ''})`;\n}\nfunction extRefIdentity(e) {\n    if (!e.parentElement)\n        return NaN;\n    const parentIdentity = identity(e.parentElement);\n    const iedName = e.getAttribute('iedName');\n    const intAddr = e.getAttribute('intAddr');\n    const intAddrIndex = Array.from(e.parentElement.querySelectorAll(`ExtRef[intAddr=\"${intAddr}\"]`)).indexOf(e);\n    if (!iedName)\n        return `${parentIdentity}>${intAddr}[${intAddrIndex}]`;\n    const [ldInst, prefix, lnClass, lnInst, doName, daName, serviceType, srcLDInst, srcPrefix, srcLNClass, srcLNInst, srcCBName,] = [\n        'ldInst',\n        'prefix',\n        'lnClass',\n        'lnInst',\n        'doName',\n        'daName',\n        'serviceType',\n        'srcLDInst',\n        'srcPrefix',\n        'srcLNClass',\n        'srcLNInst',\n        'srcCBName',\n    ].map(name => e.getAttribute(name));\n    const cbPath = srcCBName\n        ? `${serviceType}:${srcCBName} ${srcLDInst ?? ''}/${srcPrefix ?? ''} ${srcLNClass ?? ''} ${srcLNInst ?? ''}`\n        : '';\n    const dataPath = `${iedName} ${ldInst}/${prefix ?? ''} ${lnClass} ${lnInst ?? ''} ${doName} ${daName || ''}`;\n    return `${parentIdentity}>${cbPath ? `${cbPath} ` : ''}${dataPath}${\n    // eslint-disable-next-line no-useless-concat\n    intAddr ? '@' + `${intAddr}` : ''}`;\n}\nfunction lNIdentity(e) {\n    const [prefix, lnClass, inst] = ['prefix', 'lnClass', 'inst'].map(name => e.getAttribute(name));\n    return `${identity(e.parentElement)}>${prefix ?? ''} ${lnClass} ${inst}`;\n}\nfunction clientLNIdentity(e) {\n    const [apRef, iedName, ldInst, prefix, lnClass, lnInst] = [\n        'apRef',\n        'iedName',\n        'ldInst',\n        'prefix',\n        'lnClass',\n        'lnInst',\n    ].map(name => e.getAttribute(name));\n    return `${identity(e.parentElement)}>${iedName} ${apRef || ''} ${ldInst}/${prefix ?? ''} ${lnClass} ${lnInst}`;\n}\nfunction ixNamingIdentity(e) {\n    const [name, ix] = ['name', 'ix'].map(naming => e.getAttribute(naming));\n    return `${identity(e.parentElement)}>${name}${ix ? `[${ix}]` : ''}`;\n}\nfunction valIdentity(e) {\n    if (!e.parentElement)\n        return NaN;\n    const sGroup = e.getAttribute('sGroup');\n    const index = Array.from(e.parentElement.children)\n        .filter(child => child.getAttribute('sGroup') === sGroup)\n        .findIndex(child => child.isSameNode(e));\n    return `${identity(e.parentElement)}>${sGroup ? `${sGroup}.` : ''} ${index}`;\n}\nfunction connectedAPIdentity(e) {\n    const [iedName, apName] = ['iedName', 'apName'].map(name => e.getAttribute(name));\n    return `${iedName} ${apName}`;\n}\nfunction controlBlockIdentity(e) {\n    const [ldInst, cbName] = ['ldInst', 'cbName'].map(name => e.getAttribute(name));\n    return `${ldInst} ${cbName}`;\n}\nfunction physConnIdentity(e) {\n    if (!e.parentElement)\n        return NaN;\n    if (!e.parentElement.querySelector('PhysConn[type=\"RedConn\"]'))\n        return NaN;\n    const pcType = e.getAttribute('type');\n    if (e.parentElement.children.length > 1 &&\n        pcType !== 'Connection' &&\n        pcType !== 'RedConn')\n        return NaN;\n    return `${identity(e.parentElement)}>${pcType}`;\n}\nfunction pIdentity(e) {\n    if (!e.parentElement)\n        return NaN;\n    const eParent = e.parentElement;\n    const eType = e.getAttribute('type');\n    if (eParent.tagName === 'PhysConn')\n        return `${identity(e.parentElement)}>${eType}`;\n    const index = Array.from(e.parentElement.children)\n        .filter(child => child.getAttribute('type') === eType)\n        .findIndex(child => child.isSameNode(e));\n    return `${identity(e.parentElement)}>${eType} [${index}]`;\n}\nfunction enumValIdentity(e) {\n    return `${identity(e.parentElement)}>${e.getAttribute('ord')}`;\n}\nfunction protNsIdentity(e) {\n    return `${identity(e.parentElement)}>${e.getAttribute('type') || '8-MMS'}\\t${e.textContent}`;\n}\nfunction sCLIdentity() {\n    return '';\n}\nfunction namingIdentity(e) {\n    return e.parentElement.tagName === 'SCL'\n        ? e.getAttribute('name')\n        : `${identity(e.parentElement)}>${e.getAttribute('name')}`;\n}\nfunction singletonIdentity(e) {\n    return identity(e.parentElement).toString();\n}\nfunction idNamingIdentity(e) {\n    return `#${e.id}`;\n}\nconst tags = {\n    AccessControl: {\n        identity: singletonIdentity,\n    },\n    AccessPoint: {\n        identity: namingIdentity,\n    },\n    Address: {\n        identity: singletonIdentity,\n    },\n    Association: {\n        identity: associationIdentity,\n    },\n    Authentication: {\n        identity: singletonIdentity,\n    },\n    BDA: {\n        identity: namingIdentity,\n    },\n    BitRate: {\n        identity: singletonIdentity,\n    },\n    Bay: {\n        identity: namingIdentity,\n    },\n    ClientLN: {\n        identity: clientLNIdentity,\n    },\n    ClientServices: {\n        identity: singletonIdentity,\n    },\n    CommProt: {\n        identity: singletonIdentity,\n    },\n    Communication: {\n        identity: singletonIdentity,\n    },\n    ConductingEquipment: {\n        identity: namingIdentity,\n    },\n    ConfDataSet: {\n        identity: singletonIdentity,\n    },\n    ConfLdName: {\n        identity: singletonIdentity,\n    },\n    ConfLNs: {\n        identity: singletonIdentity,\n    },\n    ConfLogControl: {\n        identity: singletonIdentity,\n    },\n    ConfReportControl: {\n        identity: singletonIdentity,\n    },\n    ConfSG: {\n        identity: singletonIdentity,\n    },\n    ConfSigRef: {\n        identity: singletonIdentity,\n    },\n    ConnectedAP: {\n        identity: connectedAPIdentity,\n    },\n    ConnectivityNode: {\n        identity: namingIdentity,\n    },\n    DA: {\n        identity: namingIdentity,\n    },\n    DAI: {\n        identity: ixNamingIdentity,\n    },\n    DAType: {\n        identity: idNamingIdentity,\n    },\n    DO: {\n        identity: namingIdentity,\n    },\n    DOI: {\n        identity: namingIdentity,\n    },\n    DOType: {\n        identity: idNamingIdentity,\n    },\n    DataObjectDirectory: {\n        identity: singletonIdentity,\n    },\n    DataSet: {\n        identity: namingIdentity,\n    },\n    DataSetDirectory: {\n        identity: singletonIdentity,\n    },\n    DataTypeTemplates: {\n        identity: singletonIdentity,\n    },\n    DynAssociation: {\n        identity: singletonIdentity,\n    },\n    DynDataSet: {\n        identity: singletonIdentity,\n    },\n    EnumType: {\n        identity: idNamingIdentity,\n    },\n    EnumVal: {\n        identity: enumValIdentity,\n    },\n    EqFunction: {\n        identity: namingIdentity,\n    },\n    EqSubFunction: {\n        identity: namingIdentity,\n    },\n    ExtRef: {\n        identity: extRefIdentity,\n    },\n    FCDA: {\n        identity: fCDAIdentity,\n    },\n    FileHandling: {\n        identity: singletonIdentity,\n    },\n    Function: {\n        identity: namingIdentity,\n    },\n    GeneralEquipment: {\n        identity: namingIdentity,\n    },\n    GetCBValues: {\n        identity: singletonIdentity,\n    },\n    GetDataObjectDefinition: {\n        identity: singletonIdentity,\n    },\n    GetDataSetValue: {\n        identity: singletonIdentity,\n    },\n    GetDirectory: {\n        identity: singletonIdentity,\n    },\n    GOOSE: {\n        identity: singletonIdentity,\n    },\n    GOOSESecurity: {\n        identity: namingIdentity,\n    },\n    GSE: {\n        identity: controlBlockIdentity,\n    },\n    GSEDir: {\n        identity: singletonIdentity,\n    },\n    GSEControl: {\n        identity: namingIdentity,\n    },\n    GSESettings: {\n        identity: singletonIdentity,\n    },\n    GSSE: {\n        identity: singletonIdentity,\n    },\n    Header: {\n        identity: singletonIdentity,\n    },\n    History: {\n        identity: singletonIdentity,\n    },\n    Hitem: {\n        identity: hitemIdentity,\n    },\n    IED: {\n        identity: namingIdentity,\n    },\n    IEDName: {\n        identity: iEDNameIdentity,\n    },\n    Inputs: {\n        identity: singletonIdentity,\n    },\n    IssuerName: {\n        identity: singletonIdentity,\n    },\n    KDC: {\n        identity: kDCIdentity,\n    },\n    LDevice: {\n        identity: lDeviceIdentity,\n    },\n    LN: {\n        identity: lNIdentity,\n    },\n    LN0: {\n        identity: singletonIdentity,\n    },\n    LNode: {\n        identity: lNodeIdentity,\n    },\n    LNodeType: {\n        identity: idNamingIdentity,\n    },\n    Line: {\n        identity: namingIdentity,\n    },\n    Log: {\n        identity: namingIdentity,\n    },\n    LogControl: {\n        identity: namingIdentity,\n    },\n    LogSettings: {\n        identity: singletonIdentity,\n    },\n    MaxTime: {\n        identity: singletonIdentity,\n    },\n    McSecurity: {\n        identity: singletonIdentity,\n    },\n    MinTime: {\n        identity: singletonIdentity,\n    },\n    NeutralPoint: {\n        identity: terminalIdentity,\n    },\n    OptFields: {\n        identity: singletonIdentity,\n    },\n    P: {\n        identity: pIdentity,\n    },\n    PhysConn: {\n        identity: physConnIdentity,\n    },\n    PowerTransformer: {\n        identity: namingIdentity,\n    },\n    Private: {\n        identity: () => NaN,\n    },\n    Process: {\n        identity: namingIdentity,\n    },\n    ProtNs: {\n        identity: protNsIdentity,\n    },\n    Protocol: {\n        identity: singletonIdentity,\n    },\n    ReadWrite: {\n        identity: singletonIdentity,\n    },\n    RedProt: {\n        identity: singletonIdentity,\n    },\n    ReportControl: {\n        identity: namingIdentity,\n    },\n    ReportSettings: {\n        identity: singletonIdentity,\n    },\n    RptEnabled: {\n        identity: singletonIdentity,\n    },\n    SamplesPerSec: {\n        identity: singletonIdentity,\n    },\n    SampledValueControl: {\n        identity: namingIdentity,\n    },\n    SecPerSamples: {\n        identity: singletonIdentity,\n    },\n    SCL: {\n        identity: sCLIdentity,\n    },\n    SDI: {\n        identity: ixNamingIdentity,\n    },\n    SDO: {\n        identity: namingIdentity,\n    },\n    Server: {\n        identity: singletonIdentity,\n    },\n    ServerAt: {\n        identity: singletonIdentity,\n    },\n    Services: {\n        identity: singletonIdentity,\n    },\n    SetDataSetValue: {\n        identity: singletonIdentity,\n    },\n    SettingControl: {\n        identity: singletonIdentity,\n    },\n    SettingGroups: {\n        identity: singletonIdentity,\n    },\n    SGEdit: {\n        identity: singletonIdentity,\n    },\n    SmpRate: {\n        identity: singletonIdentity,\n    },\n    SMV: {\n        identity: controlBlockIdentity,\n    },\n    SmvOpts: {\n        identity: singletonIdentity,\n    },\n    SMVsc: {\n        identity: singletonIdentity,\n    },\n    SMVSecurity: {\n        identity: namingIdentity,\n    },\n    SMVSettings: {\n        identity: singletonIdentity,\n    },\n    SubEquipment: {\n        identity: namingIdentity,\n    },\n    SubFunction: {\n        identity: namingIdentity,\n    },\n    SubNetwork: {\n        identity: namingIdentity,\n    },\n    Subject: {\n        identity: singletonIdentity,\n    },\n    Substation: {\n        identity: namingIdentity,\n    },\n    SupSubscription: {\n        identity: singletonIdentity,\n    },\n    TapChanger: {\n        identity: namingIdentity,\n    },\n    Terminal: {\n        identity: terminalIdentity,\n    },\n    Text: {\n        identity: singletonIdentity,\n    },\n    TimerActivatedControl: {\n        identity: singletonIdentity,\n    },\n    TimeSyncProt: {\n        identity: singletonIdentity,\n    },\n    TransformerWinding: {\n        identity: namingIdentity,\n    },\n    TrgOps: {\n        identity: singletonIdentity,\n    },\n    Val: {\n        identity: valIdentity,\n    },\n    ValueHandling: {\n        identity: singletonIdentity,\n    },\n    Voltage: {\n        identity: singletonIdentity,\n    },\n    VoltageLevel: {\n        identity: namingIdentity,\n    },\n};\n/** @returns Identity string for a valid SCL element or NaN */\nexport function identity(e) {\n    if (e === null)\n        return NaN;\n    if (e.closest('Private'))\n        return NaN;\n    const tag = e.tagName;\n    if (isSCLTag(tag))\n        return tags[tag].identity(e);\n    return NaN;\n}\n//# sourceMappingURL=identity.js.map","import { svg } from 'lit';\n\nexport const voltageLevelIcon = svg`<symbol\n  id=\"VoltageLevel\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <path\n    d=\"M 4 4 L 12.5 21 L 21 4\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"3\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const bayIcon = svg`<symbol\n  id=\"Bay\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <path\n    d=\"M 3 2 L 22 2\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 3 5 L 22 5\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 7 2 L 7 7.5\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 18 5 L 18 7.5\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 5.5 8.5 L 7 11 L 7 13 L 18 13 L 18 11 L 16.5 8.5\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 12.5 13 L 12.5 15\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 11 16 L 12.5 18.5 L 12.5 23\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 10.5 21 L 12.5 23 L 14.5 21\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const inFeedLineIcon = svg`<symbol\n  id=\"IFL\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <path\n    d=\"M 12.5 0 L 12.5 4\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\" M 12.5 25 L 12.5 21\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <polygon\n    points=\"4,4 12.5,21 21,4\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const disconnectorIcon = svg`<symbol\n  id=\"DIS\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <path\n    d=\"M 12.5 0 L 12.5 4\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\" M 12.5 25 L 12.5 21\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 12.5 21 L 4 4\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"M 8 4 L 17 4\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const circuitBreakerIcon = svg`<symbol\n  id=\"CBR\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <line\n    x1=\"12.5\"\n    y1=\"0\"\n    x2=\"12.5\"\n    y2=\"4\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <line\n    x1=\"12.5\"\n    y1=\"25\"\n    x2=\"12.5\"\n    y2=\"21\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <line\n    x1=\"12.5\"\n    y1=\"21\"\n    x2=\"4\"\n    y2=\"5\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <line\n    x1=\"9.5\"\n    y1=\"1\"\n    x2=\"15.5\"\n    y2=\"7\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <line\n    x1=\"9.5\"\n    y1=\"7\"\n    x2=\"15.5\"\n    y2=\"1\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const currentTransformerIcon = svg`<symbol\n  id=\"CTR\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <line\n    x1=\"12.5\"\n    y1=\"0\"\n    x2=\"12.5\"\n    y2=\"25\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <circle\n    cx=\"12.5\"\n    cy=\"12.5\"\n    r=\"7.5\"\n    stroke=\"currentColor\"\n    fill=\"transparent\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const voltageTransformerIcon = svg`<symbol\n  id=\"VTR\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <line\n    x1=\"12.5\"\n    y1=\"0\"\n    x2=\"12.5\"\n    y2=\"5\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <circle\n    cx=\"12.5\"\n    cy=\"10\"\n    r=\"5\"\n    stroke=\"currentColor\"\n    fill=\"transparent\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <circle\n    cx=\"12.5\"\n    cy=\"15\"\n    r=\"5\"\n    stroke=\"currentColor\"\n    fill=\"transparent\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <line\n    x1=\"12.5\"\n    y1=\"20\"\n    x2=\"12.5\"\n    y2=\"25\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <line\n    x1=\"9\"\n    y1=\"24.25\"\n    x2=\"16\"\n    y2=\"24.25\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const earthSwitchIcon = svg`<symbol\n  id=\"ERS\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <line\n    x1=\"12.5\"\n    x2=\"12.5\"\n    y1=\"19.2\"\n    y2=\"16.2\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    x1=\"12.5\"\n    x2=\"12.5\"\n    y1=\"1.25\"\n    y2=\"6.25\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    x1=\"12.5\"\n    x2=\"8\"\n    y1=\"16.2\"\n    y2=\"7.25\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    x1=\"13.5\"\n    x2=\"11.5\"\n    y1=\"6.25\"\n    y2=\"6.25\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    x1=\"17\"\n    x2=\"8\"\n    y1=\"19.2\"\n    y2=\"19.2\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    x1=\"15.5\"\n    x2=\"9.5\"\n    y1=\"21.4\"\n    y2=\"21.4\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    x1=\"14.5\"\n    x2=\"10.5\"\n    y1=\"23.5\"\n    y2=\"23.5\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n</symbol>`;\n\nexport const generalConductingEquipmentIcon = svg`<symbol\n  id=\"ConductingEquipment\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <circle\n    cx=\"12.5\"\n    cy=\"12.5\"\n    r=\"11\"\n    stroke-width=\"1.5\"\n    stroke=\"currentColor\"\n    fill=\"transparent\"\n  />\n  <path\n    d=\" M 7.5 17.5\n    L 12 13\n    Z\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\"\tM 11 7\n      L 10 8\n      C 5 13, 11 20, 17 15\n      L 18 14\n      Z\"\n    fill=\"currentColor\"\n    stroke=\"currentColor\"\n    stroke-linejoin=\"round\"\n  />\n  <path\n    d=\" M 13 9\n    L 16 6\n    Z\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n  <path\n    d=\" M 16 12\n    L 19 9\n    Z\"\n    fill=\"transparent\"\n    stroke=\"currentColor\"\n    stroke-width=\"2\"\n    stroke-linejoin=\"round\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const connectivityNodeIcon = svg`<marker\n  markerWidth=\"3\" markerHeight=\"3\"\n  refX=\"12.5\" refY=\"12.5\"\n  viewBox=\"0 0 25 25\"\n  id=\"circle\"\n>\n  <circle\n    fill=\"black\"\n    cx=\"12.5\"\n    cy=\"12.5\"\n    r=\"12.5\"\n  />\n</marker>`;\n\nexport const groundedIcon = svg`<marker\n  markerWidth=\"20\" markerHeight=\"20\"\n  refX=\"12.5\" refY=\"12.5\"\n  viewBox=\"0 0 25 25\"\n  id=\"grounded\"\n  orient=\"auto-start-reverse\"\n>\n  <line\n    y1=\"17\"\n    y2=\"8\"\n    x1=\"12.5\"\n    x2=\"12.5\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    y1=\"15.5\"\n    y2=\"9.5\"\n    x1=\"14.7\"\n    x2=\"14.7\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n  <line\n    y1=\"14.5\"\n    y2=\"10.5\"\n    x1=\"16.8\"\n    x2=\"16.8\"\n    stroke=\"currentColor\"\n    stroke-linecap=\"round\"\n    stroke-width=\"1.5\"\n  />\n</marker>`;\n\nexport const powerTransformerTwoWindingIcon = svg`<symbol\n  id=\"PTR\"\n  viewBox=\"0 0 25 25\"\n  width=\"1\" height=\"1\"\n>\n  <line\n    x1=\"12.5\"\n    y1=\"2\"\n    x2=\"12.5\"\n    y2=\"5\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <circle\n    cx=\"12.5\"\n    cy=\"10\"\n    r=\"5\"\n    stroke=\"currentColor\"\n    fill=\"transparent\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <circle\n    cx=\"12.5\"\n    cy=\"15\"\n    r=\"5\"\n    stroke=\"currentColor\"\n    fill=\"transparent\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n  <line\n    x1=\"12.5\"\n    y1=\"20\"\n    x2=\"12.5\"\n    y2=\"23\"\n    stroke=\"currentColor\"\n    stroke-width=\"1.5\"\n    stroke-linecap=\"round\"\n  />\n</symbol>`;\n\nexport const symbols = svg`\n  <defs>\n  <pattern id=\"dots\" patternUnits=\"userSpaceOnUse\" patternContentUnits=\"userSpaceOnUse\" width=\"1\" height=\"1\">\n    <circle class=\"droptarget\" cx=\"0.5\" cy=\"0.5\" r=\"0.1\" fill=\"#888\" fill-opacity=\"0.3\">\n  </pattern>\n${disconnectorIcon}\n${circuitBreakerIcon}\n${voltageTransformerIcon}\n${currentTransformerIcon}\n${inFeedLineIcon}\n${generalConductingEquipmentIcon}\n${connectivityNodeIcon}\n${groundedIcon}\n  </defs>\n`;\n","/* eslint-disable lit-a11y/click-events-have-key-events */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable no-alert */\n/* eslint-disable no-return-assign */\n/* eslint-disable no-debugger */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-nested-ternary */\n\nimport { LitElement, html, css, svg, nothing } from 'lit';\nimport { svg as staticSvg, unsafeStatic } from 'lit/static-html.js';\n/* eslint-disable-next-line @typescript-eslint/no-unused-vars */\nimport { query, state } from 'lit/decorators.js';\n\nimport { Edit, newEditEvent } from '@openscd/open-scd-core';\nimport { getReference, identity } from '@openscd/oscd-scl';\n\nimport { symbols } from './icons.js';\n\n/*\n// open-scd editor action for backwards compatibility\nfunction newCreateEvent(parent: Node, element: Node, reference?: Node | null) {\n  return new CustomEvent('editor-action', {\n    bubbles: true,\n    composed: true,\n    detail: { action: { new: { parent, element, reference } } },\n  });\n}\n*/\n\nconst svgNs = 'http://www.w3.org/2000/svg';\nconst sldNs = 'https://transpower.com/SCL/SSD/SLD/v0';\nconst gridSize = 25;\n\nconst singleTerminal = [\n  'VTR',\n  'GEN',\n  'MOT',\n  'FAN',\n  'PMP',\n  'EFN',\n  'BAT',\n  'RRC',\n  'SAR',\n  'SMC',\n  'IFL',\n];\n\nconst dirs = ['E', 'S', 'W', 'N'] as const;\n\ntype Dir = (typeof dirs)[number];\n\nconst clockwise: Record<Dir, Dir> = { E: 'S', S: 'W', W: 'N', N: 'E' };\n\ntype Attrs = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  dir: Dir;\n  bus: boolean;\n};\n\nfunction direction(str: string | null): Dir {\n  const dir = str?.toUpperCase();\n  if (dirs.includes(dir as Dir)) return dir as Dir;\n  return 'S';\n}\n\nconst degrees = { S: 0, W: 90, N: 180, E: 270 };\n\nfunction attributes(element: Element): Attrs {\n  const [x, y, w, h] = ['x', 'y', 'w', 'h'].map(name =>\n    parseInt(element.getAttributeNS(sldNs, name) ?? '1', 10)\n  );\n  const dir = direction(element.getAttributeNS(sldNs, 'dir'));\n  const bus = ['true', '1'].includes(\n    element.getAttributeNS(sldNs, 'bus')?.trim() ?? 'false'\n  );\n\n  return { x, y, w, h, bus, dir };\n}\n\nconst childTags: Partial<Record<string, string[]>> = {\n  SCL: ['Substation'],\n  Substation: ['VoltageLevel'],\n  VoltageLevel: ['Bay'],\n  Bay: ['ConductingEquipment', 'ConnectivityNode'],\n  ConductingEquipment: ['Terminal'],\n};\n\nfunction getChildren(element: Element): Element[] {\n  return Array.from(element.children).filter(child =>\n    childTags[element.tagName]?.includes(child.tagName)\n  );\n}\n\nfunction isValidTarget(target: Element, moving: Element) {\n  return (\n    childTags[target.tagName]?.includes(moving.tagName) &&\n    [target, null].includes(moving.closest(target.tagName))\n  );\n}\n\nfunction svgCoordinates(\n  clientX: number,\n  clientY: number,\n  svgElement: SVGGraphicsElement\n) {\n  const p = new DOMPoint(clientX, clientY);\n  const { x, y } = p.matrixTransform(svgElement.getScreenCTM()?.inverse());\n  return { clickedX: Math.floor(x), clickedY: Math.floor(y) };\n}\n\ntype LineSegment = {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n  from: Element;\n  to?: Element | number;\n};\n\nexport default class Designer extends LitElement {\n  @state()\n  doc?: XMLDocument;\n\n  @state()\n  editCount = -1;\n\n  @state()\n  placing?: Element;\n\n  @state()\n  resizing?: Element;\n\n  getSVG(id: string | number) {\n    if (Number.isNaN(id)) return null;\n    return (\n      this.shadowRoot?.querySelector<SVGGraphicsElement>(`svg#${id}`) ?? null\n    );\n  }\n\n  insertAt(x: number, y: number, parent: Element) {\n    if (!this.placing) return;\n    this.placing.setAttributeNS(sldNs, 'x', x.toString());\n    this.placing.setAttributeNS(sldNs, 'y', y.toString());\n\n    this.dispatchEvent(\n      newEditEvent({\n        parent,\n        node: this.placing,\n        reference: getReference(parent, this.placing.tagName),\n      })\n    );\n  }\n\n  placeAt(clientX: number, clientY: number, target: Element) {\n    if (!this.placing) return;\n    const svgElement = this.getSVG(identity(target.closest('Substation')!));\n    if (!svgElement) return;\n\n    const { clickedX, clickedY } = svgCoordinates(clientX, clientY, svgElement);\n\n    if (this.placing.closest(target.tagName) === target)\n      this.dispatchEvent(\n        newEditEvent({\n          element: this.placing,\n          attributes: {\n            x: { namespaceURI: sldNs, value: clickedX.toString() },\n            y: { namespaceURI: sldNs, value: clickedY.toString() },\n          },\n        })\n      );\n    else this.insertAt(clickedX, clickedY, target);\n\n    if (\n      !['ConductingEquipment', 'Substation', 'ConnectivityNode'].includes(\n        this.placing.tagName\n      )\n    )\n      this.resizing = this.placing;\n    this.placing = undefined;\n  }\n\n  rotateEquipment(element: Element) {\n    const { dir } = attributes(element);\n    const value = clockwise[dir];\n    this.dispatchEvent(\n      newEditEvent({\n        element,\n        attributes: { dir: { namespaceURI: sldNs, value } },\n      })\n    );\n  }\n\n  resizeTo(clientX: number, clientY: number) {\n    if (!this.resizing) return;\n    const svgElement = this.getSVG(\n      identity(this.resizing.closest('Substation')!)\n    );\n    if (!svgElement) return;\n\n    const { clickedX, clickedY } = svgCoordinates(clientX, clientY, svgElement);\n\n    const { x: elementX, y: elementY, bus } = attributes(this.resizing);\n\n    const w = Math.max(clickedX - elementX + 1, 1);\n    const h = Math.max(clickedY - elementY + 1, 1);\n\n    if (bus) {\n      const horizontal = w > h;\n      const [x1, y1] = [elementX, elementY].map(n => n + 0.5);\n      let [x2, y2] = [x1, y1];\n      if (horizontal) x2 += w - 1;\n      else y2 += h - 1;\n\n      const node = this.doc!.createElement('ConnectivityNode');\n      node.setAttribute('name', 'L1');\n      const [substationName, voltageLevelName, bayName] = [\n        'Substation',\n        'VoltageLevel',\n        'Bay',\n      ].map(tag => this.resizing!.closest(tag)?.getAttribute('name'));\n      const path = [substationName, voltageLevelName, bayName].join('/');\n      const pathName = `${path}/L1`;\n      node.setAttribute('pathName', pathName);\n\n      const priv = this.doc!.createElement('Private');\n      priv.setAttribute('type', 'Transpower-SLD-v0');\n      priv.setAttribute('xmlns', svgNs);\n      priv.setAttribute('xmlns:esld', sldNs);\n      node.appendChild(priv);\n\n      const line = this.doc!.createElement('line');\n      line.setAttribute('x1', x1.toString());\n      line.setAttribute('y1', y1.toString());\n      line.setAttribute('x2', x2.toString());\n      line.setAttribute('y2', y2.toString());\n      const clickTarget = line.cloneNode() as Element;\n      clickTarget.setAttribute('stroke', 'transparent');\n      clickTarget.setAttribute('stroke-width', '0.6');\n      clickTarget.setAttribute('stroke-linecap', 'square');\n      line.setAttribute('stroke', 'black');\n      line.setAttribute('stroke-width', '0.06');\n      line.setAttribute('stroke-linecap', 'round');\n      priv.appendChild(line);\n      priv.appendChild(clickTarget);\n\n      this.dispatchEvent(\n        newEditEvent({ parent: this.resizing, node, reference: null })\n      );\n    } else\n      this.dispatchEvent(\n        newEditEvent({\n          element: this.resizing,\n          attributes: {\n            w: { namespaceURI: sldNs, value: w.toString() },\n            h: { namespaceURI: sldNs, value: h.toString() },\n          },\n        })\n      );\n\n    this.resizing = undefined;\n  }\n\n  @state()\n  lineStart?: { x1: number; y1: number; from: Element };\n\n  @state()\n  currentLine: LineSegment[] = [];\n\n  equipmentAt(x: number, y: number, substation: Element): Element | undefined {\n    const eq = Array.from(\n      substation.querySelectorAll(\n        `:scope > VoltageLevel > Bay > ConductingEquipment`\n      )\n    ).find(\n      e =>\n        e.getAttributeNS(sldNs, 'x') === x.toString() &&\n        e.getAttributeNS(sldNs, 'y') === y.toString()\n    );\n    return eq;\n  }\n\n  lineTo(clientX: number, clientY: number) {\n    if (!this.lineStart) return;\n\n    const svgElement = this.getSVG(\n      identity(this.lineStart.from.closest('Substation'))\n    );\n    if (!svgElement) return;\n\n    const { clickedX, clickedY } = svgCoordinates(clientX, clientY, svgElement);\n\n    const x = clickedX + 0.5;\n    const y = clickedY + 0.5;\n\n    const { x1, y1, from } = this.lineStart;\n    if (x1 !== x && y1 !== y) {\n      const lastLine = this.currentLine[this.currentLine.length - 1];\n      if (lastLine) {\n        const horizontal = lastLine.y1 === lastLine.y2;\n        if (horizontal) {\n          lastLine.x2 = x;\n          this.lineStart = { ...this.lineStart, x1: x };\n        } else {\n          lastLine.y2 = y;\n          this.lineStart = { ...this.lineStart, y1: y };\n        }\n      } else {\n        const horizontal = ['W', 'E'].includes(\n          attributes(from.closest('ConductingEquipment')!).dir\n        );\n        if (horizontal) {\n          this.currentLine.push({ ...this.lineStart, x2: x, y2: y1 });\n          this.lineStart = { ...this.lineStart, x1: x };\n        } else {\n          this.currentLine.push({ ...this.lineStart, x2: x1, y2: y });\n          this.lineStart = { ...this.lineStart, y1: y };\n        }\n      }\n    }\n\n    this.currentLine.push({ ...this.lineStart, x2: x, y2: y });\n\n    this.lineStart = { ...this.lineStart, x1: x, y1: y };\n  }\n\n  connectNodeAt(clientX: number, clientY: number, cNode: Element) {\n    if (!this.lineStart) return;\n\n    const svgElement = this.getSVG(identity(cNode.closest('Substation')));\n    if (!svgElement) return;\n\n    const { clickedX, clickedY } = svgCoordinates(clientX, clientY, svgElement);\n    const x = clickedX + 0.5;\n    const y = clickedY + 0.5;\n\n    const { x1, y1, from } = this.lineStart;\n    if (x1 !== x && y1 !== y) {\n      const lastLine = this.currentLine[this.currentLine.length - 1];\n      if (lastLine) {\n        const horizontal = lastLine.y1 === lastLine.y2;\n        if (horizontal) {\n          lastLine.x2 = x;\n          this.lineStart = { ...this.lineStart, x1: x };\n        } else {\n          lastLine.y2 = y;\n          this.lineStart = { ...this.lineStart, y1: y };\n        }\n      } else {\n        const horizontal = ['W', 'E'].includes(\n          attributes(from.closest('ConductingEquipment')!).dir\n        );\n        if (horizontal) {\n          this.currentLine.push({ ...this.lineStart, x2: x, y2: y1 });\n          this.lineStart = { ...this.lineStart, x1: x };\n        } else {\n          this.currentLine.push({ ...this.lineStart, x2: x1, y2: y });\n          this.lineStart = { ...this.lineStart, y1: y };\n        }\n      }\n    }\n\n    const content = cNode.querySelector('Private[type=\"Transpower-SLD-v0\"]');\n    let nodeIndex = 1;\n    while (\n      content?.querySelector(`circle[id=\"${identity(cNode)}$node${nodeIndex}\"]`)\n    )\n      nodeIndex++;\n\n    this.currentLine.push({ ...this.lineStart, x2: x, y2: y });\n    this.currentLine.forEach(segment => (segment.to = nodeIndex));\n    this.connectToConnectivityNode(cNode);\n  }\n\n  connectToConnectivityNode(cNode: Element) {\n    const edits: Edit[] = [];\n    const parent = cNode.querySelector('Private[type=\"Transpower-SLD-v0\"]');\n    if (!parent) return;\n    this.currentLine.forEach(({ x1, y1, x2, y2, from, to }, segment) => {\n      const fromId = `${identity(\n        from.parentElement\n      ).toString()}/${from.getAttribute('name')}`;\n      const toId = `${identity(cNode)}$node${to as number}`;\n      const node = this.doc!.createElement('line');\n      node.setAttribute('x1', x1.toString());\n      node.setAttribute('y1', y1.toString());\n      node.setAttribute('x2', x2.toString());\n      node.setAttribute('y2', y2.toString());\n      node.setAttributeNS(sldNs, 'segment', `${fromId}//${segment.toString()}`);\n      node.setAttributeNS(sldNs, 'from', fromId);\n      node.setAttributeNS(sldNs, 'to', toId);\n      const clickTarget = node.cloneNode() as Element;\n      clickTarget.setAttribute('stroke', 'transparent');\n      clickTarget.setAttribute('stroke-width', '.6');\n      clickTarget.setAttribute('stroke-linecap', 'square');\n      node.setAttribute('stroke', 'black');\n      node.setAttribute('stroke-width', '0.06');\n      node.setAttribute('stroke-linecap', 'round');\n      edits.push({ parent, node, reference: null });\n      edits.push({ parent, node: clickTarget, reference: null });\n    });\n    const { x2, y2, from, to } = this.currentLine[this.currentLine.length - 1];\n    const node = this.doc!.createElement('circle');\n    node.setAttribute('cx', x2.toString());\n    node.setAttribute('cy', y2.toString());\n    node.setAttribute('r', '0.1');\n    node.setAttribute('id', `${identity(cNode)}$node${to}`);\n    edits.push({ parent, node, reference: null });\n    edits.push({\n      element: from,\n      attributes: {\n        connectivityNode: cNode.getAttribute('pathName'),\n        cNodeName: cNode.getAttribute('name'),\n        bayName: cNode.closest('Bay')?.getAttribute('name'),\n        voltageLevelName: cNode.closest('VoltageLevel')?.getAttribute('name'),\n        substationName: cNode.closest('Substation')?.getAttribute('name'),\n      },\n    });\n\n    edits.push(this.breakLineAt(x2, y2, cNode, `${identity(cNode)}$node${to}`));\n\n    this.dispatchEvent(newEditEvent(edits));\n\n    this.reset();\n  }\n\n  breakLineAt(x: number, y: number, cNode: Element, nodeId: string): Edit[] {\n    const edits: Edit[] = [];\n\n    const priv = cNode.querySelector('Private[type=\"Transpower-SLD-v0\"]');\n    const lines = Array.from(priv?.children ?? []).filter(e => {\n      if (e.tagName !== 'line') return false;\n      const [x1, y1, x2, y2] = ['x1', 'y1', 'x2', 'y2'].map(name =>\n        parseFloat(e.getAttribute(name) ?? 'NaN')\n      );\n      const vertical = x1 === x2;\n      const horizontal = y1 === y2;\n      const between = (a: number, t: number, b: number) =>\n        (a <= t && t <= b) || (a >= t && t >= b);\n      if (vertical) return x === x1 && between(y1, y, y2);\n      if (horizontal) return y === y1 && between(x1, x, x2);\n      return false;\n    });\n    if (!lines.length) debugger;\n\n    lines.forEach(line => {\n      const [x1, y1, x2, y2] = ['x1', 'y1', 'x2', 'y2'].map(name =>\n        parseFloat(line.getAttribute(name) ?? 'NaN')\n      );\n      const vertical = x1 === x2;\n      const horizontal = y1 === y2;\n\n      const newLine = line.cloneNode() as Element;\n\n      if (horizontal) {\n        const ltr = x1 < x2;\n        if (ltr) {\n          newLine.setAttribute('x1', x.toString());\n          newLine.setAttributeNS(sldNs, 'from', nodeId);\n          edits.push({\n            element: line,\n            attributes: {\n              x2: x.toString(),\n              to: { namespaceURI: sldNs, value: nodeId },\n            },\n          });\n        } else {\n          newLine.setAttribute('x2', x.toString());\n          newLine.setAttributeNS(sldNs, 'to', nodeId);\n          edits.push({\n            element: line,\n            attributes: {\n              x1: x.toString(),\n              from: { namespaceURI: sldNs, value: nodeId },\n            },\n          });\n        }\n      } else if (vertical) {\n        const td = y1 < y2;\n        if (td) {\n          newLine.setAttribute('y1', y.toString());\n          newLine.setAttributeNS(sldNs, 'from', nodeId);\n          edits.push({\n            element: line,\n            attributes: {\n              y2: y.toString(),\n              to: { namespaceURI: sldNs, value: nodeId },\n            },\n          });\n        } else {\n          newLine.setAttribute('y2', y.toString());\n          newLine.setAttributeNS(sldNs, 'to', nodeId);\n          edits.push({\n            element: line,\n            attributes: {\n              y1: y.toString(),\n              from: { namespaceURI: sldNs, value: nodeId },\n            },\n          });\n        }\n      }\n\n      edits.push({\n        parent: priv!,\n        node: newLine,\n        reference: line.nextElementSibling,\n      });\n    });\n    const line = lines[0];\n\n    const from = line.getAttributeNS(sldNs, 'from');\n    const to = line.getAttributeNS(sldNs, 'to');\n    const [segmentFrom, segmentCount] =\n      line.getAttributeNS(sldNs, 'segment')?.split('//') ?? [];\n    const segmentIndex = parseInt(segmentCount, 10);\n\n    Array.from(priv?.children ?? [])\n      .filter(c => c.tagName === 'line')\n      .forEach(line2 => {\n        const from2 = line2.getAttributeNS(sldNs, 'from');\n        const to2 = line2.getAttributeNS(sldNs, 'to');\n        const [segmentFrom2, segmentCount2] =\n          line2.getAttributeNS(sldNs, 'segment')?.split('//') ?? [];\n        const segmentIndex2 = parseInt(segmentCount2, 10);\n\n        if (\n          segmentFrom === segmentFrom2 &&\n          segmentIndex2 > segmentIndex &&\n          from2 === from\n        ) {\n          edits.push({\n            element: line2,\n            attributes: { from: { namespaceURI: sldNs, value: nodeId } },\n          });\n        }\n        if (\n          segmentFrom === segmentFrom2 &&\n          segmentIndex2 < segmentIndex &&\n          to2 === to\n        ) {\n          edits.push({\n            element: line2,\n            attributes: { to: { namespaceURI: sldNs, value: nodeId } },\n          });\n        }\n      });\n\n    return edits;\n  }\n\n  connectionPoint(terminal: Element): [[number, number], [number, number]] {\n    const equipment = terminal.closest('ConductingEquipment');\n    if (!equipment)\n      return [\n        [NaN, NaN],\n        [NaN, NaN],\n      ];\n    const { x, y, dir } = attributes(equipment);\n    const input =\n      Array.from(equipment.children)\n        .filter(c => c.tagName === 'Terminal')\n        .findIndex(t => t === terminal) === 0;\n    const terminalPoints: Record<Dir, [number, number]> = {\n      S: [x + 0.5, input ? y : y + 1],\n      N: [x + 0.5, input ? y + 1 : y],\n      E: [input ? x : x + 1, y + 0.5],\n      W: [input ? x + 1 : x, y + 0.5],\n    };\n    const connectionPoints: Record<Dir, [number, number]> = {\n      S: [x + 0.5, input ? y - 0.5 : y + 1.5],\n      N: [x + 0.5, input ? y + 1.5 : y - 0.5],\n      E: [input ? x - 0.5 : x + 1.5, y + 0.5],\n      W: [input ? x + 1.5 : x - 0.5, y + 0.5],\n    };\n\n    return [connectionPoints[dir], terminalPoints[dir]];\n  }\n\n  disconnectEquipment(equipment: Element) {\n    const terminals = Array.from(equipment.children).filter(\n      c => c.tagName === 'Terminal'\n    );\n\n    terminals.forEach(terminal => {\n      const cnName = terminal.getAttribute('cNodeName');\n      if (cnName && cnName !== 'grounded') this.disconnectTerminal(terminal);\n    });\n  }\n\n  disconnectTerminal(terminal: Element) {\n    const edits: Edit[] = [];\n\n    const cNode = terminal\n      .closest('Substation')\n      ?.querySelector(\n        `ConnectivityNode[pathName=\"${terminal.getAttribute(\n          'connectivityNode'\n        )}\"]`\n      );\n\n    if (!cNode) throw new Error(`no cNode for terminal ${identity(terminal)}`);\n\n    const priv = cNode.querySelector('Private[type=\"Transpower-SLD-v0\"]');\n    if (!priv) return;\n    const lines = Array.from(priv.children ?? [])\n      .filter(c => c.tagName === 'line')\n      .filter(line => {\n        const [from, to] = ['from', 'to'].map(name =>\n          line.getAttributeNS(sldNs, name)\n        );\n        return [from, to].includes(\n          `${identity(terminal.parentElement)}/${terminal.getAttribute('name')}`\n        );\n      });\n\n    const terminalIDs = new Set(\n      lines\n        .flatMap(line =>\n          ['from', 'to'].map(name => line.getAttributeNS(sldNs, name))\n        )\n        .filter(id => !priv.querySelector(`circle[id=\"${id}\"]`))\n    );\n    edits.push(\n      [...terminalIDs]\n        .map(id => {\n          const [eqId, termName] = (id ?? '').split('/');\n          const [ss, vl, bay, ce] = eqId.split('>');\n          return cNode\n            .closest('SCL')!\n            ?.querySelector(`:scope > Substation[name=\"${ss}\"]`)\n            ?.querySelector(`:scope > VoltageLevel[name=\"${vl}\"]`)\n            ?.querySelector(`:scope > Bay[name=\"${bay}\"]`)\n            ?.querySelector(`:scope > ConductingEquipment[name=\"${ce}\"]`)\n            ?.querySelector(`:scope > Terminal[name=\"${termName}\"]`);\n        })\n        .filter(e => e)\n        .map(element => ({\n          element: element as Element,\n          attributes: {\n            cNodeName: null,\n            connectivityNode: null,\n            bayName: null,\n            voltageLevelName: null,\n            substationName: null,\n          },\n        }))\n    );\n\n    if (\n      cNode\n        .closest('Substation')!\n        .querySelectorAll(\n          `Terminal[connectivityNode=\"${cNode.getAttribute('pathName')}\"]`\n        ).length <= 2\n    ) {\n      const terms = cNode\n        .closest('Substation')!\n        .querySelectorAll(\n          `Terminal[connectivityNode=\"${cNode.getAttribute('pathName')}\"]`\n        );\n      terms.forEach(term =>\n        edits.push({\n          element: term,\n          attributes: {\n            cNodeName: null,\n            connectivityNode: null,\n            bayName: null,\n            voltageLevelName: null,\n            substationName: null,\n          },\n        })\n      );\n\n      if (cNode.closest('Bay')!.children.length > 1) {\n        edits.push({ node: cNode });\n      }\n    }\n\n    edits.push(lines.map(node => ({ node })));\n\n    const nodeIDs = new Set(\n      lines\n        .flatMap(line =>\n          ['from', 'to'].map(name => line.getAttributeNS(sldNs, name))\n        )\n        .filter(id => priv.querySelector(`circle[id=\"${id}\"]`))\n    );\n\n    if (nodeIDs.size > 1) {\n      console.error('removing two nodes!!!');\n      debugger;\n    }\n\n    [...nodeIDs].forEach(\n      id => edits.push(this.patchOutNode(cNode, id!))\n      // this.dispatchEvent(newEditEvent(this.patchOutNode(cNode, id!)))\n    );\n    this.dispatchEvent(newEditEvent(edits));\n  }\n\n  patchOutNode(cNode: Element, nodeId: string) {\n    const priv = cNode.querySelector('Private[type=\"Transpower-SLD-v0\"]');\n    if (!priv) throw new Error(`no priv for ${nodeId}`);\n    const node = priv.querySelector(`circle[id=\"${nodeId}\"]`);\n    const edits: Edit[] = [];\n    if (node) edits.push({ node });\n    else throw new Error(`No node ${nodeId}`);\n\n    const [x, y] = ['cx', 'cy'].map(name => node!.getAttribute(name));\n\n    const lines = Array.from(priv.querySelectorAll('line'));\n    const linesToNode = lines.filter(\n      line => line.getAttributeNS(sldNs, 'to') === nodeId\n    );\n    const linesFromNode = lines.filter(\n      line => line.getAttributeNS(sldNs, 'from') === nodeId\n    );\n\n    const adjacentToNode = linesToNode.filter(\n      line => line.getAttribute('x2') === x && line.getAttribute('y2') === y\n    );\n    const adjacentFromNode = linesFromNode.filter(\n      line => line.getAttribute('x1') === x && line.getAttribute('y1') === y\n    );\n\n    const lineToNode = adjacentToNode.find(\n      line => line.getAttribute('stroke') === 'black'\n    )!;\n    const lineFromNode = adjacentFromNode.find(\n      line => line.getAttribute('stroke') === 'black'\n    )!;\n    /*\n    const targetToNode = adjacentToNode.find(\n      line => line.getAttribute('stroke') === 'transparent'\n    )!;\n    const targetFromNode = adjacentFromNode.find(\n      line => line.getAttribute('stroke') === 'transparent'\n    )!;\n     */\n\n    const from = lineToNode.getAttributeNS(sldNs, 'from');\n    const to = lineFromNode.getAttributeNS(sldNs, 'to');\n    /*\n    const [x2, y2] = ['x2', 'y2'].map(name => lineFromNode.getAttribute(name));\n     */\n\n    linesToNode.forEach(element =>\n      edits.push({\n        element,\n        attributes: { to: { namespaceURI: sldNs, value: to } },\n      })\n    );\n\n    linesFromNode.forEach(element =>\n      edits.push({\n        element,\n        attributes: { from: { namespaceURI: sldNs, value: from } },\n      })\n    );\n\n    /*\n    edits.push({ node: lineFromNode }, { node: targetFromNode });\n    [lineToNode, targetToNode].forEach(element =>\n      edits.push({ element, attributes: { x2, y2 } })\n    );\n     */\n\n    return edits;\n  }\n\n  groundTerminal(terminal: Element) {\n    const edits: Edit[] = [];\n    const bay = terminal.closest('Bay');\n    const [substationName, voltageLevelName, bayName] = [\n      'Substation',\n      'VoltageLevel',\n      'Bay',\n    ].map(tag => terminal.closest(tag)?.getAttribute('name'));\n    if (!bay) return;\n    let groundedNode = bay.querySelector('ConnectivityNode[name=\"grounded\"]');\n    if (!groundedNode) {\n      const name = 'grounded';\n      const pathName = `${substationName}/${voltageLevelName}/${bayName}/${name}`;\n      groundedNode = this.doc!.createElement('ConnectivityNode');\n      groundedNode.setAttribute('name', name);\n      groundedNode.setAttribute('pathName', pathName);\n      edits.push({\n        parent: bay,\n        node: groundedNode,\n        reference: getReference(bay, 'ConnectivityNode'),\n      });\n    }\n    edits.push({\n      element: terminal,\n      attributes: {\n        cNodeName: 'grounded',\n        connectivityNode: groundedNode.getAttribute('pathName'),\n        substationName,\n        voltageLevelName,\n        bayName,\n      },\n    });\n    this.dispatchEvent(newEditEvent(edits));\n  }\n\n  connectTerminal(terminal: Element) {\n    const [[x, y], [tx, ty]] = this.connectionPoint(terminal);\n    if (!this.lineStart) {\n      this.currentLine.push({ x1: tx, y1: ty, x2: x, y2: y, from: terminal });\n      this.lineStart = { x1: x, y1: y, from: terminal };\n      return;\n    }\n\n    const { x1, y1, from } = this.lineStart;\n    if (x1 !== x && y1 !== y) {\n      const lastLine = this.currentLine[this.currentLine.length - 1];\n      if (lastLine) {\n        const horizontal = lastLine.y1 === lastLine.y2;\n        if (horizontal) {\n          lastLine.x2 = x;\n          this.lineStart = { ...this.lineStart, x1: x };\n        } else {\n          lastLine.y2 = y;\n          this.lineStart = { ...this.lineStart, y1: y };\n        }\n      } else {\n        const horizontal = ['W', 'E'].includes(\n          attributes(from.closest('ConductingEquipment')!).dir\n        );\n        if (horizontal) {\n          this.currentLine.push({ ...this.lineStart, x2: x, y2: y1 });\n          this.lineStart = { ...this.lineStart, x1: x };\n        } else {\n          this.currentLine.push({ ...this.lineStart, x2: x1, y2: y });\n          this.lineStart = { ...this.lineStart, y1: y };\n        }\n      }\n    }\n\n    this.currentLine.push({ ...this.lineStart, x2: x, y2: y });\n    this.currentLine.push({ ...this.lineStart, x1: x, y1: y, x2: tx, y2: ty });\n    this.currentLine.forEach(segment => (segment.to = terminal));\n    this.createConnectivityNode();\n  }\n\n  createConnectivityNode() {\n    if (!this.doc || !this.lineStart) return;\n    const edits: Edit[] = [];\n    const { from: terminal } = this.lineStart;\n\n    const parent = terminal.closest('Bay')!;\n    const nodeNames = Array.from(\n      parent.querySelectorAll(':scope > ConnectivityNode')\n    ).map(node => node.getAttribute('name'));\n    let nodeIndex = 1;\n    while (nodeNames.includes(`L${nodeIndex}`)) nodeIndex++;\n    const name = `L${nodeIndex}`;\n\n    const [substationName, voltageLevelName, bayName] = [\n      'Substation',\n      'VoltageLevel',\n      'Bay',\n    ].map(tag => terminal.closest(tag)?.getAttribute('name'));\n    const path = [substationName, voltageLevelName, bayName].join('/');\n    const pathName = `${path}/${name}`;\n\n    const node = this.doc.createElement('ConnectivityNode');\n    node.setAttribute('name', name);\n    node.setAttribute('pathName', pathName);\n\n    [\n      terminal,\n      this.currentLine[this.currentLine.length - 1].to as Element,\n    ].forEach(element =>\n      edits.push({\n        element,\n        attributes: {\n          connectivityNode: pathName,\n          cNodeName: name,\n          bayName,\n          voltageLevelName,\n          substationName,\n        },\n      })\n    );\n\n    const priv = this.doc.createElement('Private');\n    priv.setAttribute('type', 'Transpower-SLD-v0');\n    priv.setAttribute('xmlns', svgNs);\n    priv.setAttribute('xmlns:esld', sldNs);\n    this.currentLine.forEach(({ x1, y1, x2, y2, from, to }, segment) => {\n      const fromId = `${identity(\n        from.parentElement\n      ).toString()}/${from.getAttribute('name')}`;\n      const toId = `${identity((to as Element).parentElement).toString()}/${(\n        to as Element\n      ).getAttribute('name')}`;\n      const line = this.doc!.createElement('line');\n      line.setAttribute('x1', x1.toString());\n      line.setAttribute('y1', y1.toString());\n      line.setAttribute('x2', x2.toString());\n      line.setAttribute('y2', y2.toString());\n      line.setAttributeNS(sldNs, 'segment', `${fromId}//${segment.toString()}`);\n      line.setAttributeNS(sldNs, 'from', fromId);\n      line.setAttributeNS(sldNs, 'to', toId);\n      const clickTarget = line.cloneNode() as Element;\n      clickTarget.setAttribute('stroke', 'transparent');\n      clickTarget.setAttribute('stroke-width', '0.6');\n      clickTarget.setAttribute('stroke-linecap', 'square');\n      line.setAttribute('stroke', 'black');\n      line.setAttribute('stroke-width', '0.06');\n      line.setAttribute('stroke-linecap', 'round');\n      priv.appendChild(line);\n      priv.appendChild(clickTarget);\n    });\n    node.appendChild(priv);\n\n    const reference = getReference(parent, 'ConnectivityNode');\n    edits.push({ parent, node, reference });\n\n    this.dispatchEvent(newEditEvent(edits));\n\n    this.reset();\n  }\n\n  renderEquipment(equipment: Element) {\n    const { x, y, dir } = attributes(equipment);\n    const [input, output] = Array.from(equipment.children ?? []).filter(\n      child => child.tagName === 'Terminal'\n    );\n    const deg = degrees[dir];\n\n    const inGrounded =\n      input?.getAttribute('cNodeName') === 'grounded'\n        ? svg`<line x1=\"0.5\" y1=\"-0.1\" x2=\"0.5\" y2=\"0\" stroke=\"black\" stroke-width=\"0.06\" marker-start=\"url(#grounded)\" />`\n        : nothing;\n    const outGrounded =\n      output?.getAttribute('cNodeName') === 'grounded'\n        ? svg`<line x1=\"0.5\" y1=\"1.1\" x2=\"0.5\" y2=\"1\" stroke=\"black\" stroke-width=\"0.06\" marker-start=\"url(#grounded)\" />`\n        : nothing;\n\n    const inOpen =\n      input\n        ?.closest('Substation')\n        ?.querySelector(\n          `ConnectivityNode[pathName=\"${input.getAttribute(\n            'connectivityNode'\n          )}\"] > Private[type=\"Transpower-SLD-v0\"]`\n        ) ||\n      !input ||\n      this.lineStart?.from === input ||\n      inGrounded !== nothing\n        ? nothing\n        : svg`<circle cx=\"0.5\" cy=\"0\" r=\"0.2\" opacity=\"0.4\"\n    fill=\"green\" stroke=\"lightgreen\"\n    @click=${() => this.connectTerminal(input)}\n    @contextmenu=${(e: MouseEvent) => {\n      e.preventDefault();\n      this.groundTerminal(input);\n    }}\n      />`;\n\n    const outOpen =\n      output\n        ?.closest('Substation')\n        ?.querySelector(\n          `ConnectivityNode[pathName=\"${output.getAttribute(\n            'connectivityNode'\n          )}\"] > Private[type=\"Transpower-SLD-v0\"]`\n        ) ||\n      !output ||\n      this.lineStart?.from === output ||\n      outGrounded !== nothing\n        ? nothing\n        : svg`<circle cx=\"0.5\" cy=\"1\" r=\"0.2\" opacity=\"0.4\"\n      fill=\"green\" stroke=\"lightgreen\"\n    @click=${() => this.connectTerminal(output)}\n    @contextmenu=${(e: MouseEvent) => {\n      e.preventDefault();\n      this.groundTerminal(output);\n    }}\n      />`;\n\n    const eqType = equipment.getAttribute('type') ?? '';\n    const id = ['CBR', 'CTR', 'VTR', 'DIS', 'IFL'].includes(eqType)\n      ? eqType\n      : 'ConductingEquipment';\n\n    return svg`<g class=\"equipment\" transform=\"translate(${x} ${y}) rotate(${deg}, 0.5, 0.5)\">\n      ${inGrounded}\n      ${outGrounded}\n      <title>${equipment.getAttribute('name')}</title>\n      <use href=\"#${id}\" />\n      <rect x=\".1\" y=\".1\" width=\".8\" height=\".8\" fill=\"transparent\"\n        @click=${() => {\n          this.disconnectEquipment(equipment);\n          this.placing = equipment;\n        }}\n        @contextmenu=${(e: MouseEvent) => {\n          e.preventDefault();\n          this.disconnectEquipment(equipment);\n          this.rotateEquipment(equipment);\n        }}\n        />\n      ${inOpen}\n      ${outOpen}\n    </g>`;\n  }\n\n  renderConnectivityNode(cNode: Element) {\n    const content = cNode.querySelector('Private[type=\"Transpower-SLD-v0\"]');\n    if (!content) return nothing;\n    const svgContent = content.innerHTML;\n    return staticSvg`<g class=\"node\" @click=${(e: MouseEvent) =>\n      this.connectNodeAt(e.clientX, e.clientY, cNode)}>\n       ${unsafeStatic(svgContent)}\n      <title>${cNode.getAttribute('pathName')}</title>\n      </g>`;\n  }\n\n  renderBay(bay: Element) {\n    const { x, y, w, h } = attributes(bay);\n\n    const placeTarget =\n      this.placing && isValidTarget(bay, this.placing)\n        ? svg`<rect\n      x=\"${x}\"\n      y=\"${y}\"\n      width=\"${w}\"\n      height=\"${h}\"\n      @click=${(e: MouseEvent) => this.placeAt(e.clientX, e.clientY, bay)}\n      fill=\"url(#dots)\" />`\n        : nothing;\n    return svg`<g>\n      <text x=\"${x + 0.1}\" y=\"${\n      y - 0.2\n    }\" style=\"font: 0.8px sans-serif;\" @click=${() => (this.placing = bay)}>\n        ${bay.getAttribute('name')}\n      </text>\n      <rect\n      x=\"${x}\"\n      y=\"${y}\"\n      width=\"${w}\"\n      height=\"${h}\"\n      fill=\"transparent\" stroke=\"blue\" stroke-dasharray=\".2 .2\" />\n      ${placeTarget}\n    </g>`;\n  }\n\n  renderVoltageLevel(voltageLevel: Element) {\n    const { x, y, w, h } = attributes(voltageLevel);\n    const bays: Element[] = [];\n    getChildren(voltageLevel).forEach(child => {\n      const { bus } = attributes(child);\n      if (!bus) bays.push(child);\n    });\n\n    const placeTarget =\n      this.placing && isValidTarget(voltageLevel, this.placing)\n        ? svg`\n      <rect\n      x=\"${x}\"\n      y=\"${y}\"\n      width=\"${w}\"\n      height=\"${h}\"\n      @click=${(e: MouseEvent) =>\n        this.placeAt(e.clientX, e.clientY, voltageLevel)}\n      fill=\"url(#dots)\" />\n    `\n        : nothing;\n\n    return svg`<g id=\"${identity(voltageLevel)}\">\n      <text @click=${() => (this.placing = voltageLevel)} x=\"${x}.1\" y=\"${\n      y - 0.2\n    }\" style=\"font: 0.9px sans-serif;\">\n        ${voltageLevel.getAttribute('name')}\n      </text>\n      <rect\n      x=\"${x}\"\n      y=\"${y}\"\n      width=\"${w}\"\n      height=\"${h}\"\n      fill=\"transparent\" stroke=\"orange\" />\n      ${bays.map(b => this.renderBay(b))}\n      ${placeTarget}\n    </g>`;\n  }\n\n  renderSubstation(substation: Element) {\n    const { w, h } = attributes(substation);\n    const placeTarget =\n      this.placing && isValidTarget(substation, this.placing)\n        ? svg`<rect\n      width=\"${w}\"\n      height=\"${h}\"\n      @click=${(e: MouseEvent) =>\n        this.placeAt(e.clientX, e.clientY, substation)}\n      fill=\"url(#dots)\" />`\n        : nothing;\n\n    const resizeTarget = this.resizing\n      ? svg`<rect\n      width=\"${w}\"\n      height=\"${h}\"\n      @click=${(e: MouseEvent) => this.resizeTo(e.clientX, e.clientY)}\n      fill=\"url(#dots)\" />`\n      : nothing;\n\n    const lineTarget = this.lineStart\n      ? svg`<rect\n      width=\"${w}\"\n      height=\"${h}\"\n      @click=${(e: MouseEvent) => this.lineTo(e.clientX, e.clientY)}\n      fill=\"url(#dots)\" />`\n      : nothing;\n\n    return html`<h3>${substation.getAttribute('name')}</h3>\n      <svg\n        id=${identity(substation)}\n        viewBox=\"0 0 ${w} ${h}\"\n        width=\"${w * gridSize}\"\n        height=\"${h * gridSize}\"\n        style=\"margin: 20px;\"\n        stroke-width=\"0.1\"\n        xmlns=\"${svgNs}\"\n      >\n        ${symbols}\n        <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"white\" />\n        ${getChildren(substation).map(vl => this.renderVoltageLevel(vl))}\n        ${placeTarget} ${resizeTarget} ${lineTarget}\n        ${this.currentLine.map(\n          ({ x1, y1, x2, y2 }) =>\n            svg`<line x1=\"${x1}\" y1=\"${y1}\" x2=\"${x2}\" y2=\"${y2}\"\n                      stroke=\"black\" stroke-width=\"0.06\" />`\n        )}\n        ${Array.from(\n          substation.querySelectorAll(\n            'VoltageLevel > Bay > ConductingEquipment'\n          )\n        ).map(e => this.renderEquipment(e))}\n        ${Array.from(\n          substation.querySelectorAll('VoltageLevel > Bay > ConnectivityNode')\n        ).map(c => this.renderConnectivityNode(c))}\n      </svg>`;\n  }\n\n  render() {\n    const substations = Array.from(\n      this.doc?.documentElement.children ?? []\n    ).filter(\n      child =>\n        child.tagName === 'Substation' &&\n        Array.from(child.attributes)\n          .map(a => a.value)\n          .includes(sldNs)\n    );\n\n    return html`<menu>\n        <li>\n          <button @click=${() => this.insertSubstation()}>S</button>\n        </li>\n        <li>\n          <button @click=${() => this.placeVoltageLevel()}>VL</button>\n        </li>\n        <li>\n          <button @click=${() => this.placeBay()}>Bay</button>\n        </li>\n        <li>\n          <button @click=${() => this.placeBus()}>Bus</button>\n        </li>\n        <li>\n          <button @click=${() => this.placeEquipment()}>E</button>\n        </li>\n        <li>\n          <button @click=${() => this.reset()}>X</button>\n        </li>\n      </menu>\n      <main>${substations.map(s => this.renderSubstation(s))}</main>`;\n  }\n\n  reset() {\n    this.placing = undefined;\n    this.resizing = undefined;\n    this.lineStart = undefined;\n    this.currentLine = [];\n  }\n\n  eqPlaced = 1;\n\n  placeEquipment() {\n    if (!this.doc) return;\n    const eqType = prompt('Equipment type', 'CBR');\n    if (!eqType) return;\n    const name = prompt('Equipment name', `${eqType}${this.eqPlaced++}`);\n    if (!name) return;\n    const equipment = this.doc.createElement('ConductingEquipment');\n    equipment.setAttribute('type', eqType);\n    equipment.setAttribute('name', name);\n    equipment.setAttributeNS(sldNs, 'esld:w', '8');\n    equipment.setAttributeNS(sldNs, 'esld:h', '8');\n    const input = this.doc.createElement('Terminal');\n    input.setAttribute('name', 'T1');\n    equipment.append(input);\n    if (!singleTerminal.includes(eqType)) {\n      const output = this.doc.createElement('Terminal');\n      output.setAttribute('name', 'T2');\n      equipment.append(output);\n    }\n    this.placing = equipment;\n  }\n\n  bussesPlaced = 1;\n\n  placeBus() {\n    if (!this.doc) return;\n    const name = prompt('Bus name', `Bus ${this.bussesPlaced++}`);\n    if (!name) return;\n    const bus = this.doc.createElement('Bay');\n    bus.setAttribute('name', name);\n    bus.setAttributeNS(sldNs, 'bus', 'true');\n    this.placing = bus;\n  }\n\n  baysPlaced = 1;\n\n  placeBay() {\n    if (!this.doc) return;\n    const name = prompt('Bay name', `B${this.baysPlaced++}0`);\n    if (!name) return;\n    const bay = this.doc.createElement('Bay');\n    bay.setAttribute('name', name);\n    bay.setAttributeNS(sldNs, 'esld:w', '8');\n    bay.setAttributeNS(sldNs, 'esld:h', '8');\n    this.placing = bay;\n  }\n\n  vlPlaced = 0;\n\n  placeVoltageLevel() {\n    if (!this.doc) return;\n    const name = prompt(\n      'Voltage Level name',\n      this.vlPlaced === 0\n        ? '220kV'\n        : this.vlPlaced === 1\n        ? '33kV'\n        : `VL${this.vlPlaced}`\n    );\n    if (!name) return;\n    this.vlPlaced++;\n    const voltageLevel = this.doc.createElement('VoltageLevel');\n    voltageLevel.setAttribute('name', name);\n    voltageLevel.setAttributeNS(sldNs, 'esld:w', '10');\n    voltageLevel.setAttributeNS(sldNs, 'esld:h', '10');\n    this.placing = voltageLevel;\n  }\n\n  sPlaced = 1;\n\n  insertSubstation() {\n    if (!this.doc) return;\n    const name = prompt('Substation name', `AA${this.sPlaced++}`);\n    if (!name) return;\n    const width = parseInt(prompt('width', '50') ?? '50', 10);\n    const height = parseInt(prompt('height', '25') ?? '25', 10);\n    if (!width || !height) return;\n    const substation = this.doc.createElement('Substation');\n    substation.setAttribute('name', name);\n    substation.setAttribute('xmlns:esld', sldNs);\n    substation.setAttributeNS(sldNs, 'esld:w', width.toString());\n    substation.setAttributeNS(sldNs, 'esld:h', height.toString());\n    this.dispatchEvent(\n      newEditEvent({\n        parent: this.doc.documentElement,\n        node: substation,\n        reference: getReference(this.doc.documentElement, 'Substation'),\n      })\n    );\n  }\n\n  firstUpdated() {\n    window.addEventListener(\n      'keydown',\n      (e: KeyboardEvent) => {\n        if (e.key === 'Escape') this.reset();\n      },\n      true\n    );\n  }\n\n  static styles = css`\n    g.equipment:hover g.terminal > circle {\n      stroke: green;\n    }\n    menu {\n      position: fixed;\n      bottom: 20px;\n      left: 20px;\n      list-style-type: none;\n      display: flex;\n      padding: 0;\n      margin: 0;\n      gap: 5px;\n      z-index: 100;\n    }\n  `;\n}\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","SuppressedError","t","window","e","ShadowRoot","ShadyCSS","nativeShadow","Document","prototype","CSSStyleSheet","s","Symbol","n","WeakMap","o","constructor","this","_$cssResult$","Error","cssText","styleSheet","get","replaceSync","set","toString","cssRules","trustedTypes","h","emptyScript","reactiveElementPolyfillSupport","toAttribute","Boolean","Array","JSON","stringify","fromAttribute","Number","parse","a","notEqual","l","attribute","type","String","converter","reflect","hasChanged","u","HTMLElement","super","_$Ei","Map","isUpdatePending","hasUpdated","_$El","_$Eu","addInitializer","finalize","push","observedAttributes","elementProperties","forEach","_$Ep","_$Ev","createProperty","state","noAccessor","hasOwnProperty","getPropertyDescriptor","requestUpdate","configurable","enumerable","getPropertyOptions","getPrototypeOf","properties","getOwnPropertyNames","getOwnPropertySymbols","elementStyles","finalizeStyles","styles","isArray","Set","flat","reverse","unshift","toLowerCase","_$E_","Promise","enableUpdating","_$AL","_$Eg","addController","_$ES","renderRoot","isConnected","hostConnected","call","removeController","splice","indexOf","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptStyles","adoptedStyleSheets","map","document","createElement","litNonce","setAttribute","textContent","appendChild","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$EO","removeAttribute","has","_$EC","_$Ej","reject","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","update","_$Ek","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","slice","createMarker","createComment","f","_","m","p","RegExp","g","$","y","w","_$litType$","strings","values","x","b","T","for","A","E","C","createTreeWalker","P","V","getTemplateHtml","v","lastIndex","exec","test","startsWith","N","parts","el","currentNode","content","firstChild","remove","append","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","split","index","name","ctor","H","L","z","k","tagName","data","innerHTML","S","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","M","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","R","nextSibling","Z","_$AI","_$AH","_$AA","_$AB","options","_$Cp","startNode","endNode","_$AR","iterator","insertBefore","createTextNode","_$AC","_$AP","setConnected","element","fill","j","I","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","B","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","finalized","_$litElement$","globalThis","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","_$litStatic$","join","raw","standardProperty","kind","descriptor","finisher","placement","originalKey","initializer","legacyProperty","newEditEvent","edit","CustomEvent","composed","bubbles","detail","HTMLSlotElement","assignedElements","tAbstractConductingEquipment","tEquipment","tEquipmentContainer","tGeneralEquipmentContainer","tAbstractEqFuncSubFunc","tLNodeContainer","tAnyLN","tServiceWithMax","sCLTags","tBaseNameSequence","tNamingSequence","tUnNamingSequence","tIDNamingSequence","tAbstractDataAttributeSequence","tLNodeContainerSequence","tPowerSystemResourceSequence","tEquipmentSequence","tEquipmentContainerSequence","tAbstractConductingEquipmentSequence","tControlBlockSequence","tControlSequence","tControlWithIEDNameSequence","tAnyLNSequence","tGeneralEquipmentContainerSequence","tControlWithTriggerOptSequence","tAbstractEqFuncSubFuncSequence","tags","AccessControl","parents","children","AccessPoint","Address","Association","Authentication","BDA","BitRate","Bay","ClientLN","ClientServices","CommProt","Communication","ConductingEquipment","ConfDataSet","ConfLdName","ConfLNs","ConfLogControl","ConfReportControl","ConfSG","ConfSigRef","ConnectedAP","ConnectivityNode","DA","DAI","DAType","DO","DOI","DOType","DataObjectDirectory","DataSet","DataSetDirectory","DataTypeTemplates","DynAssociation","DynDataSet","EnumType","EnumVal","EqFunction","EqSubFunction","ExtRef","FCDA","FileHandling","Function","GeneralEquipment","GetCBValues","GetDataObjectDefinition","GetDataSetValue","GetDirectory","GOOSE","GOOSESecurity","GSE","GSEDir","GSEControl","GSESettings","GSSE","Header","History","Hitem","IED","IEDName","Inputs","IssuerName","KDC","LDevice","LN","LN0","LNode","LNodeType","Line","Log","LogControl","LogSettings","MaxTime","McSecurity","MinTime","NeutralPoint","OptFields","PhysConn","PowerTransformer","Private","Process","ProtNs","Protocol","ReadWrite","RedProt","ReportControl","ReportSettings","RptEnabled","SamplesPerSec","SampledValueControl","SecPerSamples","SCL","SDI","SDO","Server","ServerAt","Services","SetDataSetValue","SettingControl","SettingGroups","SGEdit","SmpRate","SMV","SmvOpts","SMVsc","SMVSecurity","SMVSettings","SubEquipment","SubFunction","SubNetwork","Subject","Substation","SupSubscription","TapChanger","Terminal","Text","filter","tag","TimerActivatedControl","TimeSyncProt","TransformerWinding","TrgOps","Val","ValueHandling","Voltage","VoltageLevel","tagSet","isSCLTag","getReference","parent","parentTag","from","find","child","sequence","findIndex","terminalIdentity","identity","parentElement","ixNamingIdentity","ix","naming","controlBlockIdentity","ldInst","cbName","namingIdentity","singletonIdentity","idNamingIdentity","id","iedName","prefix","lnClass","lnInst","apRef","apName","NaN","parentIdentity","intAddr","intAddrIndex","querySelectorAll","doName","daName","serviceType","srcLDInst","srcPrefix","srcLNClass","srcLNInst","srcCBName","cbPath","fc","dataPath","closest","inst","lnType","eParent","eType","isSameNode","querySelector","pcType","sGroup","inFeedLineIcon","svg","disconnectorIcon","circuitBreakerIcon","currentTransformerIcon","voltageTransformerIcon","generalConductingEquipmentIcon","connectivityNodeIcon","groundedIcon","symbols","svgNs","sldNs","singleTerminal","dirs","clockwise","W","degrees","attributes","_a","parseInt","getAttributeNS","dir","str","toUpperCase","includes","direction","bus","_b","trim","childTags","getChildren","isValidTarget","moving","svgCoordinates","clientX","clientY","svgElement","DOMPoint","matrixTransform","getScreenCTM","inverse","clickedX","floor","clickedY","Designer","editCount","currentLine","eqPlaced","bussesPlaced","baysPlaced","vlPlaced","sPlaced","getSVG","isNaN","insertAt","placing","setAttributeNS","dispatchEvent","node","reference","placeAt","namespaceURI","value","resizing","undefined","rotateEquipment","resizeTo","elementX","elementY","max","horizontal","x1","y1","x2","y2","doc","substationName","voltageLevelName","bayName","pathName","priv","line","clickTarget","cloneNode","equipmentAt","substation","eq","lineTo","lineStart","lastLine","connectNodeAt","cNode","nodeIndex","segment","to","connectToConnectivityNode","edits","fromId","toId","connectivityNode","cNodeName","_c","breakLineAt","reset","nodeId","lines","parseFloat","between","vertical","newLine","nextElementSibling","segmentFrom","segmentCount","segmentIndex","_d","line2","from2","to2","segmentFrom2","segmentCount2","segmentIndex2","connectionPoint","terminal","equipment","input","disconnectEquipment","terminals","cnName","disconnectTerminal","terminalIDs","flatMap","eqId","termName","ss","vl","bay","ce","_e","term","nodeIDs","size","console","error","patchOutNode","linesToNode","linesFromNode","adjacentToNode","adjacentFromNode","lineToNode","lineFromNode","groundTerminal","groundedNode","connectTerminal","tx","ty","createConnectivityNode","nodeNames","renderEquipment","output","deg","inGrounded","nothing","outGrounded","inOpen","preventDefault","outOpen","eqType","_f","renderConnectivityNode","svgContent","staticSvg","unsafeStatic","renderBay","placeTarget","renderVoltageLevel","voltageLevel","bays","renderSubstation","resizeTarget","lineTarget","html","substations","documentElement","insertSubstation","placeVoltageLevel","placeBay","placeBus","placeEquipment","prompt","width","height","css","reduce"],"mappings":"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AAC,gBAAiB,cAY3CC,GAAkB,CAAC,sBAVI,CAC3B,cACA,WACA,aACA,kBACGJ,MACAC,MACAC,MACAC,KAoCCE,GAAS,CAAC,MAAO,MAmCjBC,GAAkB,CACtB,OACA,QACA,oBACA,QANuC,aAAc,eAqBjDC,GAAU,IAFK,CAAC,SApFN,CAAC,aADK,gBAAiB,iBACYH,OAOjC,CAChB,cACA,WACA,MACA,KACA,MACA,MACA,MACA,SACA,aACA,SACA,WACA,iBACA,gBACA,MACA,UACA,UACA,cACA,MACA,kBArBe,CAFY,sBAAuB,aACpB,aAAc,iBAEvB,MAAO,MAJE,MAAO,MA0CpB,YAAa,SAAU,SAAU,YATlD,OACA,UACA,QACA,gBAmDA,SACA,QACA,MACA,UACA,WApDa,UAAW,aACG,UAAW,UAsDtC,cACA,OACA,WACA,UACA,SACA,cACGC,GAvDH,eACA,eACA,WACA,SACA,SACA,eACA,0BACA,sBACA,kBACA,kBACA,mBACA,YACA,wBACA,cACA,SACA,aA0CA,iBACA,mBACGC,GA/B2B,iBAAkB,aAGhD,iBACA,cACA,cACA,cA4BA,UACA,iBACA,kBACA,gBACA,UACA,aACA,MACA,UACA,IACA,SACA,UACA,WACA,UACA,iBACA,oBACA,UACA,YACA,UACA,SACA,gBACA,UACA,iBAKIE,GAAoB,CAAC,OAAQ,WAC7BC,GAAkB,IAAID,IACtBE,GAAoB,IAAIF,IACxBG,GAAoB,IAAIH,IAExBI,GAAiC,IAAIF,GAAmB,OACxDG,GAA0B,IAAIJ,GAAiB,SAC/CK,GAA+B,IAAID,IACnCE,GAAqB,IAAID,IACzBE,GAA8B,IAC/BF,GACH,mBACA,oBAEIG,GAAuC,IACxCF,GACH,YAEIG,GAAwB,IAAIR,GAAmB,WAC/CS,GAAmB,IAAIV,IACvBW,GAA8B,IAAID,GAAkB,WACpDE,GAAiB,IAClBX,GACH,UACA,gBACA,aACA,MACA,SACA,OAEIY,GAAqC,IACtCR,GACH,mBACA,YAEIS,GAAiC,IAAIJ,GAAkB,UACvDK,GAAiC,IAClCV,GACH,mBACA,iBAGIW,GAMF,CACFC,cAAe,CA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"}