{"version":3,"file":"util.js","sourceRoot":"","sources":["../util.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAM,KAAK,GAAG,yCAAyC,CAAC;AAS/D,MAAM,UAAU,UAAU,CAAC,OAAgB;;IACzC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,WAClE,OAAA,QAAQ,CAAC,MAAA,OAAO,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,mCAAI,GAAG,EAAE,EAAE,CAAC,CAAA,EAAA,CACzD,CAAC;IACF,MAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAqB,CAAC;IAChE,MAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAqB,CAAC;IAEhE,MAAM,IAAI,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,QAAQ,CACjC,MAAA,MAAA,OAAO,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,0CAAE,IAAI,EAAE,mCAAI,OAAO,CACzD,CAAC;IAEF,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAkB,CAAC;IAEtD,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC;AACjC,CAAC","sourcesContent":["export const sldNs = 'https://transpower.co.nz/SCL/SSD/SLD/v0';\n\nexport type Attrs = {\n  pos: [number, number];\n  dim: [number, number];\n  flip: boolean;\n  rot: 0 | 1 | 2 | 3;\n};\n\nexport function attributes(element: Element): Attrs {\n  const [x, y, w, h, rotVal] = ['x', 'y', 'w', 'h', 'rot'].map(name =>\n    parseInt(element.getAttributeNS(sldNs, name) ?? '0', 10)\n  );\n  const pos = [x, y].map(d => Math.max(0, d)) as [number, number];\n  const dim = [w, h].map(d => Math.max(1, d)) as [number, number];\n\n  const flip = ['true', '1'].includes(\n    element.getAttributeNS(sldNs, 'flip')?.trim() ?? 'false'\n  );\n\n  const rot = (((rotVal % 4) + 4) % 4) as 0 | 1 | 2 | 3;\n\n  return { pos, dim, flip, rot };\n}\n"]}